"use strict";(self.webpackChunkcreate_project_docs=self.webpackChunkcreate_project_docs||[]).push([[6244],{28453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>t});var l=n(96540);const i={},r=l.createContext(i);function c(e){const s=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),l.createElement(r.Provider,{value:s},e.children)}},98202:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>t,default:()=>a,frontMatter:()=>c,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"testing/unit-testing","title":"Unit tests","description":"For each method, one or more test cases.","source":"@site/docs/testing/unit-testing.md","sourceDirName":"testing","slug":"/testing/unit-testing","permalink":"/project-professional-group-one-llc/docs/testing/unit-testing","draft":false,"unlisted":false,"editUrl":"https://github.com/Capstone-Projects-2026-spring/project-professional-group-one-llc/edit/main/documentation/docs/testing/unit-testing.md","tags":[],"version":"current","lastUpdatedBy":"Walid Parsat","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Test Procedures","permalink":"/project-professional-group-one-llc/docs/category/test-procedures"},"next":{"title":"Integration tests","permalink":"/project-professional-group-one-llc/docs/testing/integration-testing"}}');var i=n(74848),r=n(28453);const c={sidebar_position:1},t="Unit tests",d={},o=[{value:"<code>movementSensor.test.js</code>",id:"movementsensortestjs",level:2},{value:"Purpose",id:"purpose",level:3},{value:"Key Testing Techniques Used",id:"key-testing-techniques-used",level:3},{value:"Fake Timers",id:"fake-timers",level:4},{value:"Mocking <code>expo-sensors</code>",id:"mocking-expo-sensors",level:4},{value:"Loading a Fresh Module Each Test",id:"loading-a-fresh-module-each-test",level:4},{value:"Test Setup / Teardown",id:"test-setup--teardown",level:3},{value:"<code>beforeEach</code>",id:"beforeeach",level:4},{value:"<code>afterEach</code>",id:"aftereach",level:4},{value:"Test Cases",id:"test-cases",level:3},{value:"1) Registers accelerometer listener and sets update interval on import",id:"1-registers-accelerometer-listener-and-sets-update-interval-on-import",level:4},{value:"2) <code>stop()</code> removes the accelerometer subscription",id:"2-stop-removes-the-accelerometer-subscription",level:4},{value:"3) Does NOT scan when still but movement was never armed",id:"3-does-not-scan-when-still-but-movement-was-never-armed",level:4},{value:"4) After being armed, going still triggers a scan after the stillness timeout",id:"4-after-being-armed-going-still-triggers-a-scan-after-the-stillness-timeout",level:4},{value:"5) If movement resumes, it cancels the stillness timer (no scan)",id:"5-if-movement-resumes-it-cancels-the-stillness-timer-no-scan",level:4},{value:"Notes / Expectations About the Implementation",id:"notes--expectations-about-the-implementation",level:3},{value:"<code>useSentenceBuilder.test.js</code>",id:"usesentencebuildertestjs",level:2},{value:"Purpose",id:"purpose-1",level:3},{value:"Key Testing Techniques Used",id:"key-testing-techniques-used-1",level:3},{value:"Hook Testing With <code>renderHook</code>",id:"hook-testing-with-renderhook",level:4},{value:"Mocking <code>Alert.alert</code>",id:"mocking-alertalert",level:4},{value:"Test Setup",id:"test-setup",level:3},{value:"<code>beforeEach</code>",id:"beforeeach-1",level:4},{value:"Test Cases",id:"test-cases-1",level:3},{value:"1) Initial sentence is empty",id:"1-initial-sentence-is-empty",level:4},{value:"2) <code>addWord</code> appends words in order",id:"2-addword-appends-words-in-order",level:4},{value:"3) <code>removeLastWord</code> removes only the last word",id:"3-removelastword-removes-only-the-last-word",level:4},{value:"4) <code>removeLastWord</code> on empty sentence stays empty (no crash)",id:"4-removelastword-on-empty-sentence-stays-empty-no-crash",level:4},{value:"5) <code>clearSentence</code> resets sentence to empty",id:"5-clearsentence-resets-sentence-to-empty",level:4},{value:"6) <code>speakSentence</code> does nothing when sentence is empty",id:"6-speaksentence-does-nothing-when-sentence-is-empty",level:4},{value:"7) <code>speakSentence</code> alerts joined sentence when not empty",id:"7-speaksentence-alerts-joined-sentence-when-not-empty",level:4},{value:"8) Calls <code>onLogPress</code> with correct event names and payloads",id:"8-calls-onlogpress-with-correct-event-names-and-payloads",level:4},{value:"9) Does not crash if <code>onLogPress</code> is not provided",id:"9-does-not-crash-if-onlogpress-is-not-provided",level:4},{value:"<code>useSpeech.test.js</code>",id:"usespeechtestjs",level:2},{value:"Purpose",id:"purpose-2",level:3},{value:"Key Testing Techniques Used",id:"key-testing-techniques-used-2",level:3},{value:"Mocking <code>../services/tts</code>",id:"mocking-servicestts",level:4},{value:"Hook Testing With <code>renderHook</code>",id:"hook-testing-with-renderhook-1",level:4},{value:"Test Setup",id:"test-setup-1",level:3},{value:"<code>beforeEach</code>",id:"beforeeach-2",level:4},{value:"Test Cases",id:"test-cases-2",level:3},{value:"1) <code>speakText</code> calls <code>speak</code> with provided text",id:"1-speaktext-calls-speak-with-provided-text",level:4},{value:"2) <code>stopSpeech</code> calls <code>stop</code>",id:"2-stopspeech-calls-stop",level:4},{value:"3) <code>speakText</code> with empty string still calls <code>speak</code>",id:"3-speaktext-with-empty-string-still-calls-speak",level:4},{value:"4) <code>speakText</code> does not call <code>stop</code>",id:"4-speaktext-does-not-call-stop",level:4},{value:"5) <code>stopSpeech</code> does not call <code>speak</code>",id:"5-stopspeech-does-not-call-speak",level:4},{value:"<code>useSentence.test.js</code>",id:"usesentencetestjs",level:2},{value:"Purpose",id:"purpose-3",level:3},{value:"Key Testing Techniques Used",id:"key-testing-techniques-used-3",level:3},{value:"Mocking <code>../services/tts</code>",id:"mocking-servicestts-1",level:4},{value:"Hook Testing With <code>renderHook</code>",id:"hook-testing-with-renderhook-2",level:4},{value:"Test Setup",id:"test-setup-2",level:3},{value:"<code>beforeEach</code>",id:"beforeeach-3",level:4},{value:"Test Cases",id:"test-cases-3",level:3},{value:"1) Initial sentence is empty",id:"1-initial-sentence-is-empty-1",level:4},{value:"2) <code>addWord</code> appends the word to the sentence",id:"2-addword-appends-the-word-to-the-sentence",level:4},{value:"3) <code>addWord</code> immediately speaks the word",id:"3-addword-immediately-speaks-the-word",level:4},{value:"4) <code>addWord</code> speaks each word independently as they are added",id:"4-addword-speaks-each-word-independently-as-they-are-added",level:4},{value:"5) <code>speakSentence</code> speaks the full joined sentence",id:"5-speaksentence-speaks-the-full-joined-sentence",level:4},{value:"6) <code>speakSentence</code> on empty sentence calls <code>speak</code> with empty string",id:"6-speaksentence-on-empty-sentence-calls-speak-with-empty-string",level:4},{value:"7) <code>clear</code> resets the sentence to empty",id:"7-clear-resets-the-sentence-to-empty",level:4},{value:"8) <code>clear</code> calls <code>stop</code> to halt ongoing speech",id:"8-clear-calls-stop-to-halt-ongoing-speech",level:4},{value:"9) <code>clear</code> does not call <code>speak</code>",id:"9-clear-does-not-call-speak",level:4},{value:"<code>usePictogram.test.js</code>",id:"usepictogramtestjs",level:2},{value:"Purpose",id:"purpose-4",level:3},{value:"Key Testing Techniques Used",id:"key-testing-techniques-used-4",level:3},{value:"Mocking <code>fetch</code>",id:"mocking-fetch",level:4},{value:"Hook Testing With <code>renderHook</code> and <code>waitFor</code>",id:"hook-testing-with-renderhook-and-waitfor",level:4},{value:"Cache Isolation",id:"cache-isolation",level:4},{value:"Test Setup",id:"test-setup-3",level:3},{value:"<code>beforeEach</code>",id:"beforeeach-4",level:4},{value:"Test Cases",id:"test-cases-4",level:3},{value:"1) <code>getPictogramUrl</code> builds the correct URL",id:"1-getpictogramurl-builds-the-correct-url",level:4},{value:"2) Returns URI immediately when <code>arasaacId</code> is provided (no fetch)",id:"2-returns-uri-immediately-when-arasaacid-is-provided-no-fetch",level:4},{value:"3) Starts in loading state for an uncached label",id:"3-starts-in-loading-state-for-an-uncached-label",level:4},{value:"4) Fetches and resolves URI for a known label",id:"4-fetches-and-resolves-uri-for-a-known-label",level:4},{value:"5) Uses SEARCH_ALIASES to transform the label before searching",id:"5-uses-search_aliases-to-transform-the-label-before-searching",level:4},{value:"6) Falls back to last word if primary search fails",id:"6-falls-back-to-last-word-if-primary-search-fails",level:4},{value:"7) Sets error state when all fetches fail",id:"7-sets-error-state-when-all-fetches-fail",level:4},{value:"8) Caches result and does not re-fetch for the same label",id:"8-caches-result-and-does-not-re-fetch-for-the-same-label",level:4},{value:"9) Sets error when fetch returns a non-ok response",id:"9-sets-error-when-fetch-returns-a-non-ok-response",level:4},{value:"<code>useLocationDetection.test.js</code>",id:"uselocationdetectiontestjs",level:2},{value:"Purpose",id:"purpose-5",level:3},{value:"Key Testing Techniques Used",id:"key-testing-techniques-used-5",level:3},{value:"Mocking <code>../data/roomContexts</code>",id:"mocking-dataroomcontexts",level:4},{value:"Hook Testing With <code>renderHook</code>",id:"hook-testing-with-renderhook-3",level:4},{value:"Test Setup",id:"test-setup-4",level:3},{value:"<code>beforeEach</code>",id:"beforeeach-5",level:4},{value:"Test Cases",id:"test-cases-5",level:3},{value:"1) Initial state has no current room",id:"1-initial-state-has-no-current-room",level:4},{value:"2) <code>detectionMode</code> is <code>&#39;manual&#39;</code>",id:"2-detectionmode-is-manual",level:4},{value:"3) <code>allRooms</code> returns all room definitions",id:"3-allrooms-returns-all-room-definitions",level:4},{value:"4) <code>setRoomManually</code> sets the current room by matching ID",id:"4-setroommanually-sets-the-current-room-by-matching-id",level:4},{value:"5) <code>setRoomManually</code> switches between rooms correctly",id:"5-setroommanually-switches-between-rooms-correctly",level:4},{value:"6) <code>setRoomManually</code> with unknown ID sets current room to null",id:"6-setroommanually-with-unknown-id-sets-current-room-to-null",level:4},{value:"7) <code>setRoomManually</code> with null clears the current room",id:"7-setroommanually-with-null-clears-the-current-room",level:4},{value:"8) <code>setRoomManually</code> does not throw for any input",id:"8-setroommanually-does-not-throw-for-any-input",level:4},{value:"<code>useInteractionLogger.test.js</code>",id:"useinteractionloggertestjs",level:2},{value:"Purpose",id:"purpose-6",level:3},{value:"Key Testing Techniques Used",id:"key-testing-techniques-used-6",level:3},{value:"Mocking <code>react-native</code>",id:"mocking-react-native",level:4},{value:"Mocking <code>console.log</code>",id:"mocking-consolelog",level:4},{value:"Hook Testing With <code>renderHook</code>",id:"hook-testing-with-renderhook-4",level:4},{value:"Test Setup",id:"test-setup-5",level:3},{value:"<code>beforeEach</code>",id:"beforeeach-6",level:4},{value:"<code>afterEach</code>",id:"aftereach-1",level:4},{value:"Test Cases",id:"test-cases-6",level:3},{value:"1) <code>deviceId</code> is generated in the expected format",id:"1-deviceid-is-generated-in-the-expected-format",level:4},{value:"2) <code>interactionLogs</code> starts empty",id:"2-interactionlogs-starts-empty",level:4},{value:"3) <code>logButtonPress</code> appends an entry with the correct structure",id:"3-logbuttonpress-appends-an-entry-with-the-correct-structure",level:4},{value:"4) <code>logButtonPress</code> uses room location when <code>currentRoom</code> is provided",id:"4-logbuttonpress-uses-room-location-when-currentroom-is-provided",level:4},{value:"5) <code>logButtonPress</code> falls back to general when <code>currentRoom</code> is null",id:"5-logbuttonpress-falls-back-to-general-when-currentroom-is-null",level:4},{value:"6) <code>logButtonPress</code> merges additional metadata into the entry",id:"6-logbuttonpress-merges-additional-metadata-into-the-entry",level:4},{value:"7) <code>logButtonPress</code> emits entry to <code>console.log</code>",id:"7-logbuttonpress-emits-entry-to-consolelog",level:4},{value:"8) Multiple <code>logButtonPress</code> calls accumulate entries in order",id:"8-multiple-logbuttonpress-calls-accumulate-entries-in-order",level:4},{value:"9) <code>logButtonPress</code> with no metadata does not crash",id:"9-logbuttonpress-with-no-metadata-does-not-crash",level:4},{value:"Summary",id:"summary",level:2}];function h(e){const s={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"unit-tests",children:"Unit tests"})}),"\n",(0,i.jsx)(s.p,{children:"For each method, one or more test cases."}),"\n",(0,i.jsx)(s.p,{children:"A test case consists of input parameter values and expected results."}),"\n",(0,i.jsx)(s.p,{children:"All external classes should be stubbed using mock objects."}),"\n",(0,i.jsx)(s.h1,{id:"unit-test-documentation",children:"Unit Test Documentation"}),"\n",(0,i.jsx)(s.p,{children:"This document describes what each unit test file covers, how the mocks work, and what behaviors are being verified."}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"movementsensortestjs",children:(0,i.jsx)(s.code,{children:"movementSensor.test.js"})}),"\n",(0,i.jsx)(s.h3,{id:"purpose",children:"Purpose"}),"\n",(0,i.jsxs)(s.p,{children:["Tests the ",(0,i.jsx)(s.code,{children:"movementSensor"})," module (imported from ",(0,i.jsx)(s.code,{children:"../src/hooks/movementSensor"}),") that uses the Expo Accelerometer to:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Register an accelerometer listener on module import"}),"\n",(0,i.jsx)(s.li,{children:"Set the accelerometer update interval"}),"\n",(0,i.jsx)(s.li,{children:"Track movement until a target travel distance is reached (arming a scan)"}),"\n",(0,i.jsx)(s.li,{children:"Trigger a BLE scan only after the device becomes still for long enough"}),"\n",(0,i.jsx)(s.li,{children:"Cancel a pending scan if movement resumes"}),"\n",(0,i.jsxs)(s.li,{children:["Clean up the accelerometer subscription via ",(0,i.jsx)(s.code,{children:"stop()"})]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"key-testing-techniques-used",children:"Key Testing Techniques Used"}),"\n",(0,i.jsx)(s.h4,{id:"fake-timers",children:"Fake Timers"}),"\n",(0,i.jsx)(s.p,{children:"The file uses:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"jest.useFakeTimers()"})," to control time-based behavior (e.g., stillness timeouts)."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"jest.advanceTimersByTime(ms)"})," to simulate time passing and trigger timer callbacks."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:'This is essential because "stillness triggers scan after a timeout" is timer-driven behavior.'}),"\n",(0,i.jsxs)(s.h4,{id:"mocking-expo-sensors",children:["Mocking ",(0,i.jsx)(s.code,{children:"expo-sensors"})]}),"\n",(0,i.jsxs)(s.p,{children:["The test replaces ",(0,i.jsx)(s.code,{children:"expo-sensors"})," with a mock implementation:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"Accelerometer.addListener(cb)"})," is mocked to:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Capture the callback (",(0,i.jsx)(s.code,{children:"capturedListener"}),") so tests can manually feed accelerometer samples."]}),"\n",(0,i.jsxs)(s.li,{children:["Return a subscription object with ",(0,i.jsx)(s.code,{children:"{ remove: mockRemove }"})," so cleanup can be tested."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"Accelerometer.setUpdateInterval"})," is mocked so we can assert it was configured properly."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Mock variables:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"mockAddListener"}),": spy for ",(0,i.jsx)(s.code,{children:"addListener"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"mockSetUpdateInterval"}),": spy for ",(0,i.jsx)(s.code,{children:"setUpdateInterval"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"mockRemove"}),": spy for ",(0,i.jsx)(s.code,{children:"subscription.remove()"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"capturedListener"}),": stores the callback passed to ",(0,i.jsx)(s.code,{children:"addListener"})]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"loading-a-fresh-module-each-test",children:"Loading a Fresh Module Each Test"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"movementSensor"})," has top-level side effects (it registers listeners on import), so each test uses a helper:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"jest.resetModules()"})," to reset the Node module cache"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"jest.isolateModules()"})," to ensure the ",(0,i.jsx)(s.code,{children:"require()"})," happens in an isolated registry"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"This guarantees each test starts with a clean module state."}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"test-setup--teardown",children:"Test Setup / Teardown"}),"\n",(0,i.jsx)(s.h4,{id:"beforeeach",children:(0,i.jsx)(s.code,{children:"beforeEach"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Clears mocks"}),"\n",(0,i.jsxs)(s.li,{children:["Spies on ",(0,i.jsx)(s.code,{children:"console.log"})," to verify logging behavior"]}),"\n",(0,i.jsxs)(s.li,{children:["Imports the module fresh via ",(0,i.jsx)(s.code,{children:"loadFreshModule()"})]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"aftereach",children:(0,i.jsx)(s.code,{children:"afterEach"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Restores the ",(0,i.jsx)(s.code,{children:"console.log"})," spy"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"test-cases",children:"Test Cases"}),"\n",(0,i.jsx)(s.h4,{id:"1-registers-accelerometer-listener-and-sets-update-interval-on-import",children:"1) Registers accelerometer listener and sets update interval on import"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"registers accelerometer listener and sets update interval on import"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Importing the module calls:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"Accelerometer.setUpdateInterval(100)"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"Accelerometer.addListener(...)"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["Ensures ",(0,i.jsx)(s.code,{children:"capturedListener"})," is actually a function (the update callback)."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Confirms that the module's top-level initialization is correct and consistent."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"2-stop-removes-the-accelerometer-subscription",children:["2) ",(0,i.jsx)(s.code,{children:"stop()"})," removes the accelerometer subscription"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"stop() removes the accelerometer subscription"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling ",(0,i.jsx)(s.code,{children:"mod.stop()"})," triggers ",(0,i.jsx)(s.code,{children:"subscription.remove()"})," exactly once."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Prevents memory leaks and duplicated listeners across app screens / lifecycle changes."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h4,{id:"3-does-not-scan-when-still-but-movement-was-never-armed",children:"3) Does NOT scan when still but movement was never armed"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"does NOT scan when the device is still but movement was never armed"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:'Feeding a "still" sample without ever reaching the target distance does not trigger scanning,\neven after enough time passes.'}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Signals used"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Confirms ",(0,i.jsx)(s.code,{children:"console.log"})," was ",(0,i.jsx)(s.em,{children:"not"})," called with:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"[BLE] Scanning for nearby devices..."})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:'Scanning should only happen after "arming" conditions are met (target distance reached).'}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h4,{id:"4-after-being-armed-going-still-triggers-a-scan-after-the-stillness-timeout",children:"4) After being armed, going still triggers a scan after the stillness timeout"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"after being armed, going still triggers a scan after the stillness timeout"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Movement samples accumulate enough distance to arm scanning."}),"\n",(0,i.jsxs)(s.li,{children:["A log appears indicating arming:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"[Tracker] 5m reached \u2014 will scan when device stops."})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.li,{children:"A still sample starts the stillness timer."}),"\n",(0,i.jsx)(s.li,{children:"Before timeout: scan does not occur."}),"\n",(0,i.jsxs)(s.li,{children:["After timeout: scan log appears:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"[BLE] Scanning for nearby devices..."})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"How time is simulated"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Mocks ",(0,i.jsx)(s.code,{children:"Date.now()"})," so distance calculations have deterministic timestamps."]}),"\n",(0,i.jsxs)(s.li,{children:["Uses a loop that advances ",(0,i.jsx)(s.code,{children:"now"})," by ",(0,i.jsx)(s.code,{children:"200ms"})," per movement sample to simulate sustained movement."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:'This is the core expected behavior: "travel enough -> wait until still -> scan."'}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h4,{id:"5-if-movement-resumes-it-cancels-the-stillness-timer-no-scan",children:"5) If movement resumes, it cancels the stillness timer (no scan)"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"if movement resumes, it cancels the stillness timer (no scan)"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Arms scanning the same way as the previous test."}),"\n",(0,i.jsx)(s.li,{children:"Starts the stillness timer by going still."}),"\n",(0,i.jsxs)(s.li,{children:["Sends a movement sample ",(0,i.jsx)(s.em,{children:"before"})," the stillness timeout completes."]}),"\n",(0,i.jsx)(s.li,{children:"Advances time beyond the timeout."}),"\n",(0,i.jsx)(s.li,{children:"Confirms scan did not occur."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:'Prevents scanning while the device is moving again (correct "debounce" behavior).'}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"notes--expectations-about-the-implementation",children:"Notes / Expectations About the Implementation"}),"\n",(0,i.jsxs)(s.p,{children:["These tests assume that ",(0,i.jsx)(s.code,{children:"movementSensor"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calls ",(0,i.jsx)(s.code,{children:"Accelerometer.setUpdateInterval(100)"})," on import"]}),"\n",(0,i.jsxs)(s.li,{children:["Calls ",(0,i.jsx)(s.code,{children:"Accelerometer.addListener(cb)"})," on import"]}),"\n",(0,i.jsxs)(s.li,{children:["Accumulates distance using time deltas (",(0,i.jsx)(s.code,{children:"Date.now()"}),") and acceleration magnitude"]}),"\n",(0,i.jsxs)(s.li,{children:["Arms scanning at ",(0,i.jsx)(s.code,{children:"5m"})," (target distance)"]}),"\n",(0,i.jsxs)(s.li,{children:["Triggers scan only after ",(0,i.jsx)(s.code,{children:"STILLNESS_TIMEOUT"}),' elapses while "still"']}),"\n",(0,i.jsx)(s.li,{children:"Cancels stillness timer if movement resumes before the timeout"}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"usesentencebuildertestjs",children:(0,i.jsx)(s.code,{children:"useSentenceBuilder.test.js"})}),"\n",(0,i.jsx)(s.h3,{id:"purpose-1",children:"Purpose"}),"\n",(0,i.jsxs)(s.p,{children:["Tests the custom hook ",(0,i.jsx)(s.code,{children:"useSentenceBuilder"})," (imported from ",(0,i.jsx)(s.code,{children:"../src/hooks/useSentenceBuilder"}),') which manages a "sentence" as an array of words and exposes actions to:']}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Add a word"}),"\n",(0,i.jsx)(s.li,{children:"Remove the last word"}),"\n",(0,i.jsx)(s.li,{children:"Clear the sentence"}),"\n",(0,i.jsxs)(s.li,{children:["Speak the sentence (implemented here as an ",(0,i.jsx)(s.code,{children:"Alert.alert"}),")"]}),"\n",(0,i.jsxs)(s.li,{children:["Optionally log user events via an ",(0,i.jsx)(s.code,{children:"onLogPress"})," callback"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"key-testing-techniques-used-1",children:"Key Testing Techniques Used"}),"\n",(0,i.jsxs)(s.h4,{id:"hook-testing-with-renderhook",children:["Hook Testing With ",(0,i.jsx)(s.code,{children:"renderHook"})]}),"\n",(0,i.jsxs)(s.p,{children:["The tests use ",(0,i.jsx)(s.code,{children:"@testing-library/react-native"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"renderHook(() => useSentenceBuilder(...))"})," to run the hook in a test environment"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"act(() => ...)"})," to apply state updates safely and ensure React state settles before assertions"]}),"\n"]}),"\n",(0,i.jsxs)(s.h4,{id:"mocking-alertalert",children:["Mocking ",(0,i.jsx)(s.code,{children:"Alert.alert"})]}),"\n",(0,i.jsxs)(s.p,{children:["When testing ",(0,i.jsx)(s.code,{children:"speakSentence"}),", the tests spy on:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"Alert.alert"})," to prevent UI popups and verify calls."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"test-setup",children:"Test Setup"}),"\n",(0,i.jsx)(s.h4,{id:"beforeeach-1",children:(0,i.jsx)(s.code,{children:"beforeEach"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"jest.clearAllMocks()"})," ensures each test starts clean and no previous call counts leak in."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"test-cases-1",children:"Test Cases"}),"\n",(0,i.jsx)(s.h4,{id:"1-initial-sentence-is-empty",children:"1) Initial sentence is empty"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"initial sentence is empty"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["On first render, ",(0,i.jsx)(s.code,{children:"sentence"})," is ",(0,i.jsx)(s.code,{children:"[]"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"2-addword-appends-words-in-order",children:["2) ",(0,i.jsx)(s.code,{children:"addWord"})," appends words in order"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"addWord appends words in order"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Adding ",(0,i.jsx)(s.code,{children:'"hello"'}),", then ",(0,i.jsx)(s.code,{children:'"world"'})," results in:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"['hello', 'world']"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Sentence ordering must match selection order for accurate speech output."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"3-removelastword-removes-only-the-last-word",children:["3) ",(0,i.jsx)(s.code,{children:"removeLastWord"})," removes only the last word"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"removeLastWord removes only the last word"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Given ",(0,i.jsx)(s.code,{children:"['I', 'like', 'pizza']"}),", removing last yields:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"['I', 'like']"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"4-removelastword-on-empty-sentence-stays-empty-no-crash",children:["4) ",(0,i.jsx)(s.code,{children:"removeLastWord"})," on empty sentence stays empty (no crash)"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"removeLastWord on empty sentence stays empty (no crash)"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Removing last word on an empty sentence:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"does not throw"}),"\n",(0,i.jsxs)(s.li,{children:["keeps ",(0,i.jsx)(s.code,{children:"sentence"})," as ",(0,i.jsx)(s.code,{children:"[]"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"5-clearsentence-resets-sentence-to-empty",children:["5) ",(0,i.jsx)(s.code,{children:"clearSentence"})," resets sentence to empty"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"clearSentence resets sentence to empty"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["After adding ",(0,i.jsx)(s.code,{children:'"test"'}),", calling ",(0,i.jsx)(s.code,{children:"clearSentence()"})," resets to ",(0,i.jsx)(s.code,{children:"[]"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"6-speaksentence-does-nothing-when-sentence-is-empty",children:["6) ",(0,i.jsx)(s.code,{children:"speakSentence"})," does nothing when sentence is empty"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"speakSentence does nothing when sentence is empty"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["With an empty sentence, calling ",(0,i.jsx)(s.code,{children:"speakSentence()"}),":","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["does ",(0,i.jsx)(s.strong,{children:"not"})," call ",(0,i.jsx)(s.code,{children:"Alert.alert"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:'Avoids confusing UX (no "speaking" popup when nothing exists to speak).'}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"7-speaksentence-alerts-joined-sentence-when-not-empty",children:["7) ",(0,i.jsx)(s.code,{children:"speakSentence"})," alerts joined sentence when not empty"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"speakSentence alerts joined sentence when not empty"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Adding ",(0,i.jsx)(s.code,{children:'"hello"'}),", ",(0,i.jsx)(s.code,{children:'"there"'})," then calling ",(0,i.jsx)(s.code,{children:"speakSentence()"})," triggers:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"Alert.alert('Speaking', 'hello there')"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:'Confirms correct joining behavior and expected "speaking" output.'}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"8-calls-onlogpress-with-correct-event-names-and-payloads",children:["8) Calls ",(0,i.jsx)(s.code,{children:"onLogPress"})," with correct event names and payloads"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"calls onLogPress with correct event names and payloads"})}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"What it verifies"}),"\nWhen ",(0,i.jsx)(s.code,{children:"useSentenceBuilder({ onLogPress })"})," is used:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"addWord('hi')"})," logs:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"onLogPress('word_tile', { word: 'hi' })"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"removeLastWord()"})," logs:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"onLogPress('remove_last_word')"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"clearSentence()"})," logs:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"onLogPress('clear_sentence')"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["After adding two words and calling ",(0,i.jsx)(s.code,{children:"speakSentence()"}),", logs:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"onLogPress('speak_sentence', { sentenceLength: 2 })"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Ensures analytics / logging hooks receive consistent event names and payload shapes."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"9-does-not-crash-if-onlogpress-is-not-provided",children:["9) Does not crash if ",(0,i.jsx)(s.code,{children:"onLogPress"})," is not provided"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"does not crash if onLogPress is not provided"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling all actions without an ",(0,i.jsx)(s.code,{children:"onLogPress"})," callback:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"does not throw any errors"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Makes the hook safe to use in screens/components that do not provide logging."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"usespeechtestjs",children:(0,i.jsx)(s.code,{children:"useSpeech.test.js"})}),"\n",(0,i.jsx)(s.h3,{id:"purpose-2",children:"Purpose"}),"\n",(0,i.jsxs)(s.p,{children:["Tests the ",(0,i.jsx)(s.code,{children:"useSpeech"})," hook (imported from ",(0,i.jsx)(s.code,{children:"../src/hooks/useSpeech"}),") which wraps the TTS (text-to-speech) service. The hook exposes two functions:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"speakText(text)"})," \u2014 delegates to the ",(0,i.jsx)(s.code,{children:"speak"})," function from ",(0,i.jsx)(s.code,{children:"../services/tts"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"stopSpeech()"})," \u2014 delegates to the ",(0,i.jsx)(s.code,{children:"stop"})," function from ",(0,i.jsx)(s.code,{children:"../services/tts"})]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"key-testing-techniques-used-2",children:"Key Testing Techniques Used"}),"\n",(0,i.jsxs)(s.h4,{id:"mocking-servicestts",children:["Mocking ",(0,i.jsx)(s.code,{children:"../services/tts"})]}),"\n",(0,i.jsx)(s.p,{children:"The test replaces the TTS service with mock functions:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"speak"})," is mocked as a ",(0,i.jsx)(s.code,{children:"jest.fn()"})," to intercept calls and verify arguments"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"stop"})," is mocked as a ",(0,i.jsx)(s.code,{children:"jest.fn()"})," to intercept calls and verify invocation"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Mock variables:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"mockSpeak"}),": spy for ",(0,i.jsx)(s.code,{children:"speak"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"mockStop"}),": spy for ",(0,i.jsx)(s.code,{children:"stop"})]}),"\n"]}),"\n",(0,i.jsxs)(s.h4,{id:"hook-testing-with-renderhook-1",children:["Hook Testing With ",(0,i.jsx)(s.code,{children:"renderHook"})]}),"\n",(0,i.jsxs)(s.p,{children:["The tests use ",(0,i.jsx)(s.code,{children:"@testing-library/react-native"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"renderHook(() => useSpeech())"})," to run the hook in a test environment"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"test-setup-1",children:"Test Setup"}),"\n",(0,i.jsx)(s.h4,{id:"beforeeach-2",children:(0,i.jsx)(s.code,{children:"beforeEach"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"jest.clearAllMocks()"})," resets call counts and recorded arguments before each test."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"test-cases-2",children:"Test Cases"}),"\n",(0,i.jsxs)(s.h4,{id:"1-speaktext-calls-speak-with-provided-text",children:["1) ",(0,i.jsx)(s.code,{children:"speakText"})," calls ",(0,i.jsx)(s.code,{children:"speak"})," with provided text"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"speakText calls speak with provided text"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling ",(0,i.jsx)(s.code,{children:"speakText('hello world')"})," results in:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"speak('hello world')"})," being called exactly once with the correct argument."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Confirms ",(0,i.jsx)(s.code,{children:"speakText"})," correctly passes through the text argument to the underlying TTS service without modification."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"2-stopspeech-calls-stop",children:["2) ",(0,i.jsx)(s.code,{children:"stopSpeech"})," calls ",(0,i.jsx)(s.code,{children:"stop"})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"stopSpeech calls stop"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling ",(0,i.jsx)(s.code,{children:"stopSpeech()"})," results in:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"stop()"})," being called exactly once."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Ensures the hook correctly delegates to the TTS service's ",(0,i.jsx)(s.code,{children:"stop"})," function to halt ongoing speech."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"3-speaktext-with-empty-string-still-calls-speak",children:["3) ",(0,i.jsx)(s.code,{children:"speakText"})," with empty string still calls ",(0,i.jsx)(s.code,{children:"speak"})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"speakText with empty string still calls speak"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling ",(0,i.jsx)(s.code,{children:"speakText('')"})," still calls ",(0,i.jsx)(s.code,{children:"speak('')"}),"."]}),"\n",(0,i.jsx)(s.li,{children:"The hook does not guard against or swallow empty-string input."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"The filtering responsibility belongs to the caller; the hook should not silently drop calls."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"4-speaktext-does-not-call-stop",children:["4) ",(0,i.jsx)(s.code,{children:"speakText"})," does not call ",(0,i.jsx)(s.code,{children:"stop"})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"speakText does not call stop"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling ",(0,i.jsx)(s.code,{children:"speakText"})," never inadvertently calls ",(0,i.jsx)(s.code,{children:"stop"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"5-stopspeech-does-not-call-speak",children:["5) ",(0,i.jsx)(s.code,{children:"stopSpeech"})," does not call ",(0,i.jsx)(s.code,{children:"speak"})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"stopSpeech does not call speak"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling ",(0,i.jsx)(s.code,{children:"stopSpeech"})," never inadvertently calls ",(0,i.jsx)(s.code,{children:"speak"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"usesentencetestjs",children:(0,i.jsx)(s.code,{children:"useSentence.test.js"})}),"\n",(0,i.jsx)(s.h3,{id:"purpose-3",children:"Purpose"}),"\n",(0,i.jsxs)(s.p,{children:["Tests the ",(0,i.jsx)(s.code,{children:"useSentence"})," hook (imported from ",(0,i.jsx)(s.code,{children:"../src/hooks/useSentence"}),") which manages a sentence as an array of words, provides immediate per-word speech feedback, and exposes actions to:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Add a word (and immediately speak it)"}),"\n",(0,i.jsx)(s.li,{children:"Speak the full sentence"}),"\n",(0,i.jsx)(s.li,{children:"Clear the sentence (and stop any ongoing speech)"}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"key-testing-techniques-used-3",children:"Key Testing Techniques Used"}),"\n",(0,i.jsxs)(s.h4,{id:"mocking-servicestts-1",children:["Mocking ",(0,i.jsx)(s.code,{children:"../services/tts"})]}),"\n",(0,i.jsx)(s.p,{children:"The test replaces the TTS service with mock functions:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"speak"})," is mocked as a ",(0,i.jsx)(s.code,{children:"jest.fn()"})," to capture calls and verify arguments"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"stop"})," is mocked as a ",(0,i.jsx)(s.code,{children:"jest.fn()"})," to capture calls and verify invocation"]}),"\n"]}),"\n",(0,i.jsxs)(s.h4,{id:"hook-testing-with-renderhook-2",children:["Hook Testing With ",(0,i.jsx)(s.code,{children:"renderHook"})]}),"\n",(0,i.jsxs)(s.p,{children:["The tests use ",(0,i.jsx)(s.code,{children:"@testing-library/react-native"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"renderHook(() => useSentence())"})," to run the hook in a test environment"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"act(() => ...)"})," to safely apply state updates before assertions"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"test-setup-2",children:"Test Setup"}),"\n",(0,i.jsx)(s.h4,{id:"beforeeach-3",children:(0,i.jsx)(s.code,{children:"beforeEach"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"jest.clearAllMocks()"})," resets all mock state between tests."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"test-cases-3",children:"Test Cases"}),"\n",(0,i.jsx)(s.h4,{id:"1-initial-sentence-is-empty-1",children:"1) Initial sentence is empty"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"initial sentence is empty"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["On first render, ",(0,i.jsx)(s.code,{children:"sentence"})," is ",(0,i.jsx)(s.code,{children:"[]"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"2-addword-appends-the-word-to-the-sentence",children:["2) ",(0,i.jsx)(s.code,{children:"addWord"})," appends the word to the sentence"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"addWord appends the word to the sentence"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling ",(0,i.jsx)(s.code,{children:"addWord('hello')"})," then ",(0,i.jsx)(s.code,{children:"addWord('world')"})," results in:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"sentence"})," equal to ",(0,i.jsx)(s.code,{children:"['hello', 'world']"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"3-addword-immediately-speaks-the-word",children:["3) ",(0,i.jsx)(s.code,{children:"addWord"})," immediately speaks the word"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"addWord immediately speaks the word"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling ",(0,i.jsx)(s.code,{children:"addWord('hi')"})," triggers:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"speak('hi')"})," called exactly once with the correct argument."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Immediate speech feedback is a core accessibility feature; the hook must call ",(0,i.jsx)(s.code,{children:"speak"})," on every ",(0,i.jsx)(s.code,{children:"addWord"})," invocation."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"4-addword-speaks-each-word-independently-as-they-are-added",children:["4) ",(0,i.jsx)(s.code,{children:"addWord"})," speaks each word independently as they are added"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"addWord speaks each word independently as they are added"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Adding ",(0,i.jsx)(s.code,{children:"'I'"}),", ",(0,i.jsx)(s.code,{children:"'want'"}),", ",(0,i.jsx)(s.code,{children:"'juice'"})," triggers ",(0,i.jsx)(s.code,{children:"speak"})," three times with each individual word in order."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Confirms per-word feedback rather than a single batched call."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"5-speaksentence-speaks-the-full-joined-sentence",children:["5) ",(0,i.jsx)(s.code,{children:"speakSentence"})," speaks the full joined sentence"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"speakSentence speaks the full joined sentence"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["After adding ",(0,i.jsx)(s.code,{children:'"I"'}),", ",(0,i.jsx)(s.code,{children:'"want"'}),", ",(0,i.jsx)(s.code,{children:'"food"'}),", calling ",(0,i.jsx)(s.code,{children:"speakSentence()"})," triggers:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"speak('I want food')"})," called once."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Confirms that words are joined with spaces and the full sentence is passed as a single string to the TTS service."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"6-speaksentence-on-empty-sentence-calls-speak-with-empty-string",children:["6) ",(0,i.jsx)(s.code,{children:"speakSentence"})," on empty sentence calls ",(0,i.jsx)(s.code,{children:"speak"})," with empty string"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"speakSentence on empty sentence calls speak with empty string"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling ",(0,i.jsx)(s.code,{children:"speakSentence()"})," when ",(0,i.jsx)(s.code,{children:"sentence"})," is ",(0,i.jsx)(s.code,{children:"[]"})," triggers:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"speak('')"})," (since ",(0,i.jsx)(s.code,{children:"[].join(' ')"})," is ",(0,i.jsx)(s.code,{children:"''"}),")."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Documents and confirms the behaviour for edge case calls on an empty sentence; the hook does not guard against this."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"7-clear-resets-the-sentence-to-empty",children:["7) ",(0,i.jsx)(s.code,{children:"clear"})," resets the sentence to empty"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"clear resets the sentence to empty"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["After adding ",(0,i.jsx)(s.code,{children:'"test"'}),", calling ",(0,i.jsx)(s.code,{children:"clear()"})," resets ",(0,i.jsx)(s.code,{children:"sentence"})," to ",(0,i.jsx)(s.code,{children:"[]"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"8-clear-calls-stop-to-halt-ongoing-speech",children:["8) ",(0,i.jsx)(s.code,{children:"clear"})," calls ",(0,i.jsx)(s.code,{children:"stop"})," to halt ongoing speech"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"clear calls stop to halt ongoing speech"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling ",(0,i.jsx)(s.code,{children:"clear()"})," triggers ",(0,i.jsx)(s.code,{children:"stop()"})," exactly once."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Clearing a sentence while speech is in progress should immediately halt audio output to avoid confusion."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"9-clear-does-not-call-speak",children:["9) ",(0,i.jsx)(s.code,{children:"clear"})," does not call ",(0,i.jsx)(s.code,{children:"speak"})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"clear does not call speak"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling ",(0,i.jsx)(s.code,{children:"clear()"})," never produces new speech output."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"usepictogramtestjs",children:(0,i.jsx)(s.code,{children:"usePictogram.test.js"})}),"\n",(0,i.jsx)(s.h3,{id:"purpose-4",children:"Purpose"}),"\n",(0,i.jsxs)(s.p,{children:["Tests the ",(0,i.jsx)(s.code,{children:"usePictogram"})," hook (imported from ",(0,i.jsx)(s.code,{children:"../src/hooks/usePictogram"}),") which resolves a word or phrase label to an ARASAAC pictogram image URI. The hook:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Accepts an optional ",(0,i.jsx)(s.code,{children:"arasaacId"})," override for direct resolution without a network call"]}),"\n",(0,i.jsx)(s.li,{children:"Uses an in-memory cache to avoid redundant fetches"}),"\n",(0,i.jsx)(s.li,{children:"Applies search aliases to improve ARASAAC API query results"}),"\n",(0,i.jsx)(s.li,{children:"Falls back to the last word of the label if the primary search returns no results"}),"\n",(0,i.jsxs)(s.li,{children:["Returns ",(0,i.jsx)(s.code,{children:"{ uri, loading, error }"})]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Also tests the exported helper ",(0,i.jsx)(s.code,{children:"getPictogramUrl(id)"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"key-testing-techniques-used-4",children:"Key Testing Techniques Used"}),"\n",(0,i.jsxs)(s.h4,{id:"mocking-fetch",children:["Mocking ",(0,i.jsx)(s.code,{children:"fetch"})]}),"\n",(0,i.jsxs)(s.p,{children:["The global ",(0,i.jsx)(s.code,{children:"fetch"})," is replaced with a ",(0,i.jsx)(s.code,{children:"jest.fn()"})," to:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Return controlled JSON responses simulating ARASAAC API results"}),"\n",(0,i.jsx)(s.li,{children:"Simulate network errors or empty result sets"}),"\n"]}),"\n",(0,i.jsxs)(s.h4,{id:"hook-testing-with-renderhook-and-waitfor",children:["Hook Testing With ",(0,i.jsx)(s.code,{children:"renderHook"})," and ",(0,i.jsx)(s.code,{children:"waitFor"})]}),"\n",(0,i.jsxs)(s.p,{children:["The tests use ",(0,i.jsx)(s.code,{children:"@testing-library/react-native"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"renderHook(() => usePictogram(...))"})," to run the hook"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"waitFor()"})," to wait for async ",(0,i.jsx)(s.code,{children:"useEffect"})," state updates to settle before assertions"]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"cache-isolation",children:"Cache Isolation"}),"\n",(0,i.jsxs)(s.p,{children:["Because ",(0,i.jsx)(s.code,{children:"usePictogram"})," uses a module-level in-memory cache, tests that check network calls use unique label strings to avoid hitting cached results from previous tests."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"test-setup-3",children:"Test Setup"}),"\n",(0,i.jsx)(s.h4,{id:"beforeeach-4",children:(0,i.jsx)(s.code,{children:"beforeEach"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"jest.clearAllMocks()"})," resets fetch spy call records."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"test-cases-4",children:"Test Cases"}),"\n",(0,i.jsxs)(s.h4,{id:"1-getpictogramurl-builds-the-correct-url",children:["1) ",(0,i.jsx)(s.code,{children:"getPictogramUrl"})," builds the correct URL"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"getPictogramUrl builds the correct ARASAAC image URL"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"getPictogramUrl(12345)"})," returns:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"'https://static.arasaac.org/pictograms/12345/12345_500.png'"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"2-returns-uri-immediately-when-arasaacid-is-provided-no-fetch",children:["2) Returns URI immediately when ",(0,i.jsx)(s.code,{children:"arasaacId"})," is provided (no fetch)"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"returns URI immediately when arasaacId is provided (no fetch)"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["With ",(0,i.jsx)(s.code,{children:"usePictogram('anything', 9999)"}),":","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"loading"})," is ",(0,i.jsx)(s.code,{children:"false"})," from the initial render"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"uri"})," equals ",(0,i.jsx)(s.code,{children:"getPictogramUrl(9999)"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"fetch"})," is never called"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["The ",(0,i.jsx)(s.code,{children:"arasaacId"})," override path must be instant and free of network calls."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h4,{id:"3-starts-in-loading-state-for-an-uncached-label",children:"3) Starts in loading state for an uncached label"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"starts in loading state for an uncached label"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Before the fetch resolves, ",(0,i.jsx)(s.code,{children:"loading"})," is ",(0,i.jsx)(s.code,{children:"true"})," and ",(0,i.jsx)(s.code,{children:"uri"})," is ",(0,i.jsx)(s.code,{children:"null"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h4,{id:"4-fetches-and-resolves-uri-for-a-known-label",children:"4) Fetches and resolves URI for a known label"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"fetches and resolves URI for a known label"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["With a mocked fetch returning ",(0,i.jsx)(s.code,{children:"[{ _id: 100, keywords: [{ keyword: 'apple' }] }]"}),":","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["After resolution: ",(0,i.jsx)(s.code,{children:"loading: false"}),", ",(0,i.jsx)(s.code,{children:"uri"})," equals ",(0,i.jsx)(s.code,{children:"getPictogramUrl(100)"}),", ",(0,i.jsx)(s.code,{children:"error"})," is null"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h4,{id:"5-uses-search_aliases-to-transform-the-label-before-searching",children:"5) Uses SEARCH_ALIASES to transform the label before searching"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"uses SEARCH_ALIASES to transform the label before searching"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"usePictogram('eat')"})," causes ",(0,i.jsx)(s.code,{children:"fetch"})," to be called with a URL containing ",(0,i.jsx)(s.code,{children:"'eating'"})," (the alias), not ",(0,i.jsx)(s.code,{children:"'eat'"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h4,{id:"6-falls-back-to-last-word-if-primary-search-fails",children:"6) Falls back to last word if primary search fails"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"falls back to the last word of the label if primary search fails"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["For a label like ",(0,i.jsx)(s.code,{children:"'wash hands'"}),":","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"First fetch returns an empty array"}),"\n",(0,i.jsxs)(s.li,{children:["Second fetch is made with ",(0,i.jsx)(s.code,{children:"'hands'"})," (last word of label)"]}),"\n",(0,i.jsxs)(s.li,{children:["Final ",(0,i.jsx)(s.code,{children:"uri"})," resolves from the fallback result"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h4,{id:"7-sets-error-state-when-all-fetches-fail",children:"7) Sets error state when all fetches fail"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"sets error state when all fetches fail"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["When both the primary and fallback fetches fail:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"loading: false"}),", ",(0,i.jsx)(s.code,{children:"uri: null"}),", ",(0,i.jsx)(s.code,{children:"error"})," is a non-null string"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h4,{id:"8-caches-result-and-does-not-re-fetch-for-the-same-label",children:"8) Caches result and does not re-fetch for the same label"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"caches result and does not re-fetch for the same label"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Rendering ",(0,i.jsx)(s.code,{children:"usePictogram('banana')"})," twice calls ",(0,i.jsx)(s.code,{children:"fetch"})," only once (second render hits the cache)."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h4,{id:"9-sets-error-when-fetch-returns-a-non-ok-response",children:"9) Sets error when fetch returns a non-ok response"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"sets error when fetch returns a non-ok response"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["An HTTP error status results in ",(0,i.jsx)(s.code,{children:"uri: null"})," and a non-null ",(0,i.jsx)(s.code,{children:"error"})," string."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"uselocationdetectiontestjs",children:(0,i.jsx)(s.code,{children:"useLocationDetection.test.js"})}),"\n",(0,i.jsx)(s.h3,{id:"purpose-5",children:"Purpose"}),"\n",(0,i.jsxs)(s.p,{children:["Tests the ",(0,i.jsx)(s.code,{children:"useLocationDetection"})," hook (imported from ",(0,i.jsx)(s.code,{children:"../src/hooks/useLocationDetection"}),") which provides an abstraction for room/location detection. Currently it supports manual room selection and is designed to be extended with Bluetooth beacon detection. The hook exposes:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"currentRoom"})," \u2014 the currently active room object, or ",(0,i.jsx)(s.code,{children:"null"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"detectionMode"})," \u2014 the string ",(0,i.jsx)(s.code,{children:"'manual'"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"setRoomManually(roomId)"})," \u2014 selects a room by ID"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"allRooms"})," \u2014 the full list of available room definitions"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"key-testing-techniques-used-5",children:"Key Testing Techniques Used"}),"\n",(0,i.jsxs)(s.h4,{id:"mocking-dataroomcontexts",children:["Mocking ",(0,i.jsx)(s.code,{children:"../data/roomContexts"})]}),"\n",(0,i.jsx)(s.p,{children:"The test replaces the data layer with controlled mock data:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"getAllRooms"})," is mocked to return a predictable array of room objects"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"getRoomByBeaconId"})," is mocked as a ",(0,i.jsx)(s.code,{children:"jest.fn()"})," for future BLE use cases"]}),"\n"]}),"\n",(0,i.jsxs)(s.h4,{id:"hook-testing-with-renderhook-3",children:["Hook Testing With ",(0,i.jsx)(s.code,{children:"renderHook"})]}),"\n",(0,i.jsxs)(s.p,{children:["The tests use ",(0,i.jsx)(s.code,{children:"@testing-library/react-native"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"renderHook(() => useLocationDetection())"})," to run the hook"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"act(() => ...)"})," to apply state changes before assertions"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"test-setup-4",children:"Test Setup"}),"\n",(0,i.jsx)(s.h4,{id:"beforeeach-5",children:(0,i.jsx)(s.code,{children:"beforeEach"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"jest.clearAllMocks()"})," resets mock call records."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"test-cases-5",children:"Test Cases"}),"\n",(0,i.jsx)(s.h4,{id:"1-initial-state-has-no-current-room",children:"1) Initial state has no current room"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"initial state has no current room"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["On first render, ",(0,i.jsx)(s.code,{children:"currentRoom"})," is ",(0,i.jsx)(s.code,{children:"null"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"2-detectionmode-is-manual",children:["2) ",(0,i.jsx)(s.code,{children:"detectionMode"})," is ",(0,i.jsx)(s.code,{children:"'manual'"})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:'detectionMode is "manual"'})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"detectionMode"})," is ",(0,i.jsx)(s.code,{children:"'manual'"})," (BLE is not yet wired)."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"3-allrooms-returns-all-room-definitions",children:["3) ",(0,i.jsx)(s.code,{children:"allRooms"})," returns all room definitions"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"allRooms returns all room definitions from the data layer"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"allRooms"})," equals the array returned by the mocked ",(0,i.jsx)(s.code,{children:"getAllRooms()"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Confirms the hook correctly exposes the full room list to consumers without modification."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"4-setroommanually-sets-the-current-room-by-matching-id",children:["4) ",(0,i.jsx)(s.code,{children:"setRoomManually"})," sets the current room by matching ID"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"setRoomManually sets the current room by matching ID"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling ",(0,i.jsx)(s.code,{children:"setRoomManually('kitchen')"})," updates ",(0,i.jsx)(s.code,{children:"currentRoom"})," to ",(0,i.jsx)(s.code,{children:"{ id: 'kitchen', label: 'Kitchen' }"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"5-setroommanually-switches-between-rooms-correctly",children:["5) ",(0,i.jsx)(s.code,{children:"setRoomManually"})," switches between rooms correctly"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"setRoomManually switches between rooms correctly"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Moving from ",(0,i.jsx)(s.code,{children:"'kitchen'"})," to ",(0,i.jsx)(s.code,{children:"'bedroom'"})," updates ",(0,i.jsx)(s.code,{children:"currentRoom"})," each time."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"6-setroommanually-with-unknown-id-sets-current-room-to-null",children:["6) ",(0,i.jsx)(s.code,{children:"setRoomManually"})," with unknown ID sets current room to null"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"setRoomManually with an unknown ID sets currentRoom to null"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling ",(0,i.jsx)(s.code,{children:"setRoomManually('nonexistent_room')"})," results in ",(0,i.jsx)(s.code,{children:"currentRoom"})," being ",(0,i.jsx)(s.code,{children:"null"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Prevents a stale or incorrect room from being displayed when an unrecognised ID is provided."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"7-setroommanually-with-null-clears-the-current-room",children:["7) ",(0,i.jsx)(s.code,{children:"setRoomManually"})," with null clears the current room"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"setRoomManually with null clears the current room"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["After setting a room, calling ",(0,i.jsx)(s.code,{children:"setRoomManually(null)"})," resets ",(0,i.jsx)(s.code,{children:"currentRoom"})," to ",(0,i.jsx)(s.code,{children:"null"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"8-setroommanually-does-not-throw-for-any-input",children:["8) ",(0,i.jsx)(s.code,{children:"setRoomManually"})," does not throw for any input"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"setRoomManually does not throw for any input"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Passing ",(0,i.jsx)(s.code,{children:"undefined"}),", ",(0,i.jsx)(s.code,{children:"''"}),", or ",(0,i.jsx)(s.code,{children:"null"})," to ",(0,i.jsx)(s.code,{children:"setRoomManually"})," never throws."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Why it matters"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Defensive robustness against unexpected argument types from the BLE layer."}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"useinteractionloggertestjs",children:(0,i.jsx)(s.code,{children:"useInteractionLogger.test.js"})}),"\n",(0,i.jsx)(s.h3,{id:"purpose-6",children:"Purpose"}),"\n",(0,i.jsxs)(s.p,{children:["Tests the ",(0,i.jsx)(s.code,{children:"useInteractionLogger"})," hook (imported from ",(0,i.jsx)(s.code,{children:"../src/hooks/useInteractionLogger"}),") which records user interaction events with structured metadata. The hook:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Generates a device ID on mount derived from ",(0,i.jsx)(s.code,{children:"Platform.OS"})," and ",(0,i.jsx)(s.code,{children:"Platform.Version"})]}),"\n",(0,i.jsxs)(s.li,{children:["Appends log entries to ",(0,i.jsx)(s.code,{children:"interactionLogs"})," state on each ",(0,i.jsx)(s.code,{children:"logButtonPress"})," call"]}),"\n",(0,i.jsxs)(s.li,{children:["Associates each entry with a room location (from ",(0,i.jsx)(s.code,{children:"currentRoom"}),") or falls back to ",(0,i.jsx)(s.code,{children:"'general'"})]}),"\n",(0,i.jsxs)(s.li,{children:["Emits each entry to ",(0,i.jsx)(s.code,{children:"console.log"})]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"key-testing-techniques-used-6",children:"Key Testing Techniques Used"}),"\n",(0,i.jsxs)(s.h4,{id:"mocking-react-native",children:["Mocking ",(0,i.jsx)(s.code,{children:"react-native"})]}),"\n",(0,i.jsxs)(s.p,{children:["The test mocks ",(0,i.jsx)(s.code,{children:"Platform"})," to control the device ID format:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"Platform.OS"})," set to ",(0,i.jsx)(s.code,{children:"'ios'"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"Platform.Version"})," set to ",(0,i.jsx)(s.code,{children:"'16'"})]}),"\n"]}),"\n",(0,i.jsxs)(s.h4,{id:"mocking-consolelog",children:["Mocking ",(0,i.jsx)(s.code,{children:"console.log"})]}),"\n",(0,i.jsxs)(s.p,{children:["A spy on ",(0,i.jsx)(s.code,{children:"console.log"})," captures emitted log entries for assertion."]}),"\n",(0,i.jsxs)(s.h4,{id:"hook-testing-with-renderhook-4",children:["Hook Testing With ",(0,i.jsx)(s.code,{children:"renderHook"})]}),"\n",(0,i.jsxs)(s.p,{children:["The tests use ",(0,i.jsx)(s.code,{children:"@testing-library/react-native"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"renderHook(() => useInteractionLogger(currentRoom))"})," with varying ",(0,i.jsx)(s.code,{children:"currentRoom"})," values"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"test-setup-5",children:"Test Setup"}),"\n",(0,i.jsx)(s.h4,{id:"beforeeach-6",children:(0,i.jsx)(s.code,{children:"beforeEach"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"jest.clearAllMocks()"})," resets all spies."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"logSpy"})," is set up on ",(0,i.jsx)(s.code,{children:"console.log"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"aftereach-1",children:(0,i.jsx)(s.code,{children:"afterEach"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"logSpy.mockRestore()"})," restores the original ",(0,i.jsx)(s.code,{children:"console.log"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"test-cases-6",children:"Test Cases"}),"\n",(0,i.jsxs)(s.h4,{id:"1-deviceid-is-generated-in-the-expected-format",children:["1) ",(0,i.jsx)(s.code,{children:"deviceId"})," is generated in the expected format"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"deviceId is generated in the expected format"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"deviceId"})," matches the pattern ",(0,i.jsx)(s.code,{children:"'ios-16-<random>'"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:["Starts with ",(0,i.jsx)(s.code,{children:"'ios-16-'"})," and has at least one additional character."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"2-interactionlogs-starts-empty",children:["2) ",(0,i.jsx)(s.code,{children:"interactionLogs"})," starts empty"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"interactionLogs starts empty"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["On first render, ",(0,i.jsx)(s.code,{children:"interactionLogs"})," is ",(0,i.jsx)(s.code,{children:"[]"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"3-logbuttonpress-appends-an-entry-with-the-correct-structure",children:["3) ",(0,i.jsx)(s.code,{children:"logButtonPress"})," appends an entry with the correct structure"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"logButtonPress appends an entry with the correct structure"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["One entry is appended containing ",(0,i.jsx)(s.code,{children:"deviceId"}),", ",(0,i.jsx)(s.code,{children:"buttonName"}),", a valid ISO 8601 ",(0,i.jsx)(s.code,{children:"pressedAt"}),", and ",(0,i.jsx)(s.code,{children:"location: { id: 'general', label: 'General' }"})," (when ",(0,i.jsx)(s.code,{children:"currentRoom"})," is null)."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"4-logbuttonpress-uses-room-location-when-currentroom-is-provided",children:["4) ",(0,i.jsx)(s.code,{children:"logButtonPress"})," uses room location when ",(0,i.jsx)(s.code,{children:"currentRoom"})," is provided"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"logButtonPress uses room location when currentRoom is provided"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["With ",(0,i.jsx)(s.code,{children:"currentRoom = { id: 'kitchen', label: 'Kitchen' }"}),", the entry's ",(0,i.jsx)(s.code,{children:"location"})," equals ",(0,i.jsx)(s.code,{children:"{ id: 'kitchen', label: 'Kitchen' }"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"5-logbuttonpress-falls-back-to-general-when-currentroom-is-null",children:["5) ",(0,i.jsx)(s.code,{children:"logButtonPress"})," falls back to general when ",(0,i.jsx)(s.code,{children:"currentRoom"})," is null"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"logButtonPress falls back to general location when currentRoom is null"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["With no room set, ",(0,i.jsx)(s.code,{children:"location"})," equals ",(0,i.jsx)(s.code,{children:"{ id: 'general', label: 'General' }"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"6-logbuttonpress-merges-additional-metadata-into-the-entry",children:["6) ",(0,i.jsx)(s.code,{children:"logButtonPress"})," merges additional metadata into the entry"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"logButtonPress merges additional metadata into the entry"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling ",(0,i.jsx)(s.code,{children:"logButtonPress('word_tile', { word: 'hello' })"})," produces an entry where ",(0,i.jsx)(s.code,{children:"entry.word === 'hello'"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"7-logbuttonpress-emits-entry-to-consolelog",children:["7) ",(0,i.jsx)(s.code,{children:"logButtonPress"})," emits entry to ",(0,i.jsx)(s.code,{children:"console.log"})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"logButtonPress emits entry to console.log"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"console.log"})," is called with ",(0,i.jsx)(s.code,{children:"'[InteractionLog]'"})," and a valid JSON string after each press."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"8-multiple-logbuttonpress-calls-accumulate-entries-in-order",children:["8) Multiple ",(0,i.jsx)(s.code,{children:"logButtonPress"})," calls accumulate entries in order"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"multiple logButtonPress calls accumulate entries in order"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Three calls result in ",(0,i.jsx)(s.code,{children:"interactionLogs.length === 3"})," with entries in call order."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h4,{id:"9-logbuttonpress-with-no-metadata-does-not-crash",children:["9) ",(0,i.jsx)(s.code,{children:"logButtonPress"})," with no metadata does not crash"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Test name"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"logButtonPress with no metadata does not crash"})}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"What it verifies"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Calling ",(0,i.jsx)(s.code,{children:"logButtonPress"})," with only a button name (no metadata) does not throw."]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"movementSensor.test.js"})," \u2014 sensor lifecycle and movement/stillness logic, mocked Expo Accelerometer, controlled timers."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"useSentenceBuilder.test.js"})," \u2014 sentence state management, speech output via ",(0,i.jsx)(s.code,{children:"Alert.alert"}),", optional event logging."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"useSpeech.test.js"})," \u2014 thin TTS wrapper, correct delegation of ",(0,i.jsx)(s.code,{children:"speakText"})," and ",(0,i.jsx)(s.code,{children:"stopSpeech"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"useSentence.test.js"})," \u2014 sentence state with immediate per-word feedback, ",(0,i.jsx)(s.code,{children:"clear"}),"/",(0,i.jsx)(s.code,{children:"stop"})," integration."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"usePictogram.test.js"})," \u2014 pictogram resolution: ",(0,i.jsx)(s.code,{children:"arasaacId"})," override, caching, alias lookup, fallback search, error states."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"useLocationDetection.test.js"})," \u2014 manual room selection, null handling, correct exposure of room data."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"useInteractionLogger.test.js"})," \u2014 log entry structure, device ID, room location association, metadata merging, ",(0,i.jsx)(s.code,{children:"console.log"})," output."]}),"\n"]})]})}function a(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);