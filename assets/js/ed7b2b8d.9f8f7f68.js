"use strict";(self.webpackChunkcreate_project_docs=self.webpackChunkcreate_project_docs||[]).push([[3791],{28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var i=s(96540);const r={},d=i.createContext(r);function t(e){const n=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(d.Provider,{value:n},e.children)}},48760:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"system-architecture/design","title":"Design Document \u2013 Part I: Architecture","description":"1. Introduction","source":"@site/docs/system-architecture/design.md","sourceDirName":"system-architecture","slug":"/system-architecture/design","permalink":"/project-professional-group-one-llc/docs/system-architecture/design","draft":false,"unlisted":false,"editUrl":"https://github.com/Capstone-Projects-2026-spring/project-professional-group-one-llc/edit/main/documentation/docs/system-architecture/design.md","tags":[],"version":"current","lastUpdatedBy":"Walid Parsat","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"System Architecture","permalink":"/project-professional-group-one-llc/docs/category/system-architecture"},"next":{"title":"Development Environment","permalink":"/project-professional-group-one-llc/docs/system-architecture/development-environment"}}');var r=s(74848),d=s(28453);const t={sidebar_position:1},c="Design Document \u2013 Part I: Architecture",l={},a=[{value:"1. Introduction",id:"1-introduction",level:2},{value:"2. System Overview",id:"2-system-overview",level:2},{value:"2.1 Architecture Style",id:"21-architecture-style",level:3},{value:"2.2 Technology Stack",id:"22-technology-stack",level:3},{value:"3. Component Descriptions and Interfaces",id:"3-component-descriptions-and-interfaces",level:2},{value:"3.1 Bluetooth Beacon Layer",id:"31-bluetooth-beacon-layer",level:3},{value:"3.2 React Native Mobile Application",id:"32-react-native-mobile-application",level:3},{value:"3.3 Supabase Backend",id:"33-supabase-backend",level:3},{value:"3.4 Admin Screen",id:"34-admin-screen",level:3},{value:"3.5 External Services",id:"35-external-services",level:3},{value:"4. Class Diagrams",id:"4-class-diagrams",level:2},{value:"4.1 User &amp; Account Management",id:"41-user--account-management",level:3},{value:"4.2 Beacon &amp; Location Domain",id:"42-beacon--location-domain",level:3},{value:"4.3 Vocabulary Domain",id:"43-vocabulary-domain",level:3},{value:"5. Sequence Diagrams",id:"5-sequence-diagrams",level:2},{value:"Use Case 1 \u2013 Account Creation",id:"use-case-1--account-creation",level:3},{value:"Use Case 2 \u2013 Signing In",id:"use-case-2--signing-in",level:3},{value:"Use Case 3 \u2013 Connecting to a Beacon",id:"use-case-3--connecting-to-a-beacon",level:3},{value:"Use Case 4 \u2013 Using Vocabulary for Communication",id:"use-case-4--using-vocabulary-for-communication",level:3},{value:"Use Case 5 \u2013 Updating Favorite Words (Admin)",id:"use-case-5--updating-favorite-words-admin",level:3},{value:"Use Case 6 \u2013 Beacon Connection Failure Handling",id:"use-case-6--beacon-connection-failure-handling",level:3},{value:"6. Database Design",id:"6-database-design",level:2},{value:"6.1 Entity-Relationship Overview",id:"61-entity-relationship-overview",level:3},{value:"6.2 Table Design",id:"62-table-design",level:3},{value:"organizations",id:"organizations",level:4},{value:"administrators",id:"administrators",level:4},{value:"user_accounts",id:"user_accounts",level:4},{value:"locations",id:"locations",level:4},{value:"beacons",id:"beacons",level:4},{value:"vocabulary_words",id:"vocabulary_words",level:4},{value:"location_words <em>(junction)</em>",id:"location_words-junction",level:4},{value:"usage_logs",id:"usage_logs",level:4},{value:"7. Algorithms",id:"7-algorithms",level:2},{value:"7.1 Location Resolution Algorithm",id:"71-location-resolution-algorithm",level:3},{value:"7.2 Word Suggestion Ranking Algorithm",id:"72-word-suggestion-ranking-algorithm",level:3},{value:"7.3 Offline Fallback Strategy",id:"73-offline-fallback-strategy",level:3},{value:"8. Non-Functional Design Decisions",id:"8-non-functional-design-decisions",level:2},{value:"8.1 Responsiveness",id:"81-responsiveness",level:3},{value:"8.2 Security",id:"82-security",level:3},{value:"8.3 Scalability",id:"83-scalability",level:3},{value:"8.4 AAC Device Interoperability",id:"84-aac-device-interoperability",level:3}];function o(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"design-document--part-i-architecture",children:"Design Document \u2013 Part I: Architecture"})}),"\n",(0,r.jsx)(n.h2,{id:"1-introduction",children:"1. Introduction"}),"\n",(0,r.jsxs)(n.p,{children:["This document describes the software architecture for ",(0,r.jsx)(n.strong,{children:"AAC Beacon"}),", a location-aware Augmentative and Alternative Communication (AAC) mobile application built with React Native. It maps the system requirements to the architectural design, explains component relationships, presents class and sequence diagrams, and describes the database schema and core algorithms."]}),"\n",(0,r.jsx)(n.p,{children:"AAC Beacon reduces communication friction for users who rely on AAC by automatically surfacing the vocabulary most relevant to their current physical environment. Bluetooth Low Energy (BLE) beacons act as room identifiers; when a user's device detects a beacon, the application instantly loads a personalized, location-specific word set rather than requiring the user to navigate multiple menus."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-system-overview",children:"2. System Overview"}),"\n",(0,r.jsx)(n.h3,{id:"21-architecture-style",children:"2.1 Architecture Style"}),"\n",(0,r.jsxs)(n.p,{children:["AAC Beacon follows a ",(0,r.jsx)(n.strong,{children:"client-server architecture"})," with a React Native mobile application on the front end and Supabase (PostgreSQL + Auth + Storage) as the back-end platform. The system has three primary layers:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bluetooth Beacon Layer"})," \u2013 physical BLE beacons deployed in rooms that broadcast unique identifiers."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Client Layer"})," \u2013 a React Native app running on the user's iOS or Android device that scans for beacons and renders the AAC interface natively."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Backend Layer"})," \u2013 Supabase services that store user profiles, location metadata, AAC vocabulary, and usage logs."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"22-technology-stack",children:"2.2 Technology Stack"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Layer"}),(0,r.jsx)(n.th,{children:"Technology"}),(0,r.jsx)(n.th,{children:"Purpose"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Mobile App"}),(0,r.jsx)(n.td,{children:"React Native (Expo)"}),(0,r.jsx)(n.td,{children:"Cross-platform iOS/Android native UI"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"BLE Scanning"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"react-native-ble-plx"})}),(0,r.jsx)(n.td,{children:"Detect nearby beacons and RSSI values"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Text-to-Speech"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"expo-speech"})}),(0,r.jsx)(n.td,{children:"Convert constructed sentences to audio"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Local Storage"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"expo-secure-store"})," / AsyncStorage"]}),(0,r.jsx)(n.td,{children:"Session persistence and offline cache"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Backend"}),(0,r.jsx)(n.td,{children:"Supabase"}),(0,r.jsx)(n.td,{children:"PostgreSQL DB, Auth (JWT/RLS), Storage, Realtime"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Deployment"}),(0,r.jsx)(n.td,{children:"Expo EAS Build"}),(0,r.jsx)(n.td,{children:"Native binary builds for iOS and Android"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-component-descriptions-and-interfaces",children:"3. Component Descriptions and Interfaces"}),"\n",(0,r.jsx)(n.h3,{id:"31-bluetooth-beacon-layer",children:"3.1 Bluetooth Beacon Layer"}),"\n",(0,r.jsx)(n.p,{children:"Physical BLE beacons (iBeacon or Eddystone format) are deployed throughout the facility by an administrator. Each beacon broadcasts:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"UUID"})," \u2013 a globally unique identifier registered in the Supabase database."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RSSI (Received Signal Strength Indicator)"})," \u2013 used by the client to determine proximity."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Beacons are passive transmitters; they do not receive or process data. An administrator pairs a beacon to a named location through the Admin screen and the pairing is stored in the database."}),"\n",(0,r.jsx)(n.h3,{id:"32-react-native-mobile-application",children:"3.2 React Native Mobile Application"}),"\n",(0,r.jsx)(n.p,{children:"The React Native app is organized into six functional modules:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Module"}),(0,r.jsx)(n.th,{children:"Responsibility"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"BLE Scanning Module"}),(0,r.jsxs)(n.td,{children:["Continuously scans for nearby beacons via ",(0,r.jsx)(n.code,{children:"react-native-ble-plx"}),". Returns a list of ",(0,r.jsx)(n.code,{children:"(UUID, RSSI)"})," pairs."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Context Interpreter"}),(0,r.jsx)(n.td,{children:"Selects the beacon with the highest RSSI (with weighted proximity blending for neighbouring locations) to determine the current room."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Local Cache"}),(0,r.jsx)(n.td,{children:"Maintains AsyncStorage-backed copies of recently fetched vocabulary boards for offline fallback."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"AAC Interface"}),(0,r.jsx)(n.td,{children:"Renders the native icon grid, handles word selection, and passes chosen words to the Sentence Builder."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Sentence Builder"}),(0,r.jsx)(n.td,{children:"Maintains the current phrase, exposes add/delete/clear operations, and passes the final string to Speech Output."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Speech Output Trigger"}),(0,r.jsxs)(n.td,{children:["Calls ",(0,r.jsx)(n.code,{children:"expo-speech"})," (",(0,r.jsx)(n.code,{children:"Speech.speak()"}),") to vocalise the constructed phrase through the device speaker."]})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"The app requires the following native permissions:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BLUETOOTH_SCAN"})," / ",(0,r.jsx)(n.code,{children:"BLUETOOTH_CONNECT"})," (Android 12+) or ",(0,r.jsx)(n.code,{children:"NSBluetoothAlwaysUsageDescription"})," (iOS) \u2013 for BLE beacon scanning."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"android.permission.ACCESS_FINE_LOCATION"})," (Android) \u2013 required by the OS for BLE scanning."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"33-supabase-backend",children:"3.3 Supabase Backend"}),"\n",(0,r.jsx)(n.p,{children:"Supabase provides four services used by AAC Beacon:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PostgreSQL Database"})," \u2013 stores all persistent application data (see Section 6 for schema)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Auth (JWT + RLS)"})," \u2013 manages administrator sessions via ",(0,r.jsx)(n.code,{children:"@supabase/supabase-js"}),"; row-level security policies enforce access rules."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Realtime"})," \u2013 allows vocabulary changes made in the Admin screen to be pushed immediately to connected devices."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Storage Bucket"})," \u2013 holds icon images and symbol assets uploaded by administrators."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"34-admin-screen",children:"3.4 Admin Screen"}),"\n",(0,r.jsx)(n.p,{children:"A protected stack of React Native screens (accessible only after administrator login) that provides:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Management of administrator and child user accounts."}),"\n",(0,r.jsx)(n.li,{children:"Pairing of BLE beacons to named locations."}),"\n",(0,r.jsx)(n.li,{children:"Assignment and weighting of vocabulary words per location."}),"\n",(0,r.jsx)(n.li,{children:"View of usage analytics and logs."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"35-external-services",children:"3.5 External Services"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"expo-speech (TTS)"})," \u2013 device-native, no external API key required. Falls back to platform TTS engine (iOS AVSpeechSynthesizer / Android TextToSpeech)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Email Provider (Supabase SMTP)"})," \u2013 sends verification and password-reset emails to administrators."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-class-diagrams",children:"4. Class Diagrams"}),"\n",(0,r.jsx)(n.h3,{id:"41-user--account-management",children:"4.1 User & Account Management"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      MainAdministrator      \u2502        \u2502        Administrator         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524        \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 - orgName: string           \u2502        \u2502 - adminId: uuid             \u2502\n\u2502 - email: string             \u2502 extends\u2502 - email: string             \u2502\n\u2502 - passwordHash: string      \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502 - isVerified: boolean       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524        \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 + register()                \u2502        \u2502 + login()                   \u2502\n\u2502 + createAdmin()             \u2502        \u2502 + createUser()              \u2502\n\u2502 + verifyAdmin()             \u2502        \u2502 + manageBeacon()            \u2502\n\u2502 + login()                   \u2502        \u2502 + manageVocab()             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                                       \u2502 1..*\n                                                       \u25bc\n                                       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                       \u2502         UserAccount          \u2502\n                                       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n                                       \u2502 - userId: uuid              \u2502\n                                       \u2502 - displayName: string       \u2502\n                                       \u2502 - adminOwner: uuid          \u2502\n                                       \u2502 - accessibilityPrefs: object\u2502\n                                       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n                                       \u2502 + loadWordSet(locationId)   \u2502\n                                       \u2502 + logWordUsage(word)        \u2502\n                                       \u2502 + getContext()              \u2502\n                                       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Relationships:"})," ",(0,r.jsx)(n.code,{children:"MainAdministrator"})," extends ",(0,r.jsx)(n.code,{children:"Administrator"})," (inherits all admin capabilities and adds org-level controls). ",(0,r.jsx)(n.code,{children:"Administrator"})," has a one-to-many relationship with ",(0,r.jsx)(n.code,{children:"UserAccount"}),". All admin accounts must be verified by the ",(0,r.jsx)(n.code,{children:"MainAdministrator"})," before becoming active."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"42-beacon--location-domain",children:"4.2 Beacon & Location Domain"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502           Beacon            \u2502  N:1   \u2502          Location            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 - beaconId: uuid            \u2502        \u2502 - locationId: uuid          \u2502\n\u2502 - bleUuid: string           \u2502        \u2502 - name: string              \u2502\n\u2502 - title: string             \u2502        \u2502 - adminId: uuid             \u2502\n\u2502 - locationId: uuid          \u2502        \u2502 - description: string       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524        \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 + getSignalStrength()       \u2502        \u2502 + getVocabulary(userId)     \u2502\n\u2502 + getLocation()             \u2502        \u2502 + listNearbyLocations()     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502            BeaconScanner             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 - detectedBeacons: Map<uuid, number> \u2502\n\u2502 - currentLocation: Location          \u2502\n\u2502 - stableCount: number                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 + startScan()                        \u2502\n\u2502 + stopScan()                         \u2502\n\u2502 + resolveLocation()                  \u2502\n\u2502 + onBeaconDetected(callback)         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Relationships:"})," Each ",(0,r.jsx)(n.code,{children:"Beacon"})," is associated with exactly one ",(0,r.jsx)(n.code,{children:"Location"}),". ",(0,r.jsx)(n.code,{children:"BeaconScanner"})," observes multiple ",(0,r.jsx)(n.code,{children:"Beacon"})," signals and resolves the strongest to a ",(0,r.jsx)(n.code,{children:"Location"}),". ",(0,r.jsx)(n.code,{children:"Location"})," has a many-to-many relationship with ",(0,r.jsx)(n.code,{children:"VocabularyWord"})," through ",(0,r.jsx)(n.code,{children:"LocationWord"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"43-vocabulary-domain",children:"4.3 Vocabulary Domain"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    VocabularyWord     \u2502 M:N \u2502     LocationWord       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\u25c4\u2500\u2500\u2500\u2500\u2524 (junction)             \u2502\n\u2502 - wordId: uuid        \u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 - text: string        \u2502     \u2502 - locationId: uuid    \u2502\n\u2502 - iconUrl: string     \u2502     \u2502 - wordId: uuid        \u2502\n\u2502 - category: string    \u2502     \u2502 - weight: float       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 + render()            \u2502     \u2502 + getWeight()         \u2502\n\u2502 + getIcon()           \u2502     \u2502 + setWeight(w)        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     UserContext       \u2502     \u2502    SentenceBuilder    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 - userId: uuid        \u2502     \u2502 - tokens: string[]    \u2502\n\u2502 - locationId: uuid    \u2502     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 - usageHistory: Map   \u2502     \u2502 + addWord(word)       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524     \u2502 + removeWord(index)   \u2502\n\u2502 + getSuggestions()    \u2502     \u2502 + clear()             \u2502\n\u2502 + recordUsage(word)   \u2502     \u2502 + speak()             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502 + toString()          \u2502\n                              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Relationships:"})," ",(0,r.jsx)(n.code,{children:"VocabularyWord"})," is linked to ",(0,r.jsx)(n.code,{children:"Location"})," via the junction class ",(0,r.jsx)(n.code,{children:"LocationWord"}),", which carries an admin-assigned weight influencing suggestion ranking. ",(0,r.jsx)(n.code,{children:"UserContext"})," tracks per-user word-usage frequency per location and feeds the suggestion algorithm. ",(0,r.jsx)(n.code,{children:"SentenceBuilder"})," holds the transient phrase being constructed and triggers Speech Output via ",(0,r.jsx)(n.code,{children:"expo-speech"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-sequence-diagrams",children:"5. Sequence Diagrams"}),"\n",(0,r.jsx)(n.h3,{id:"use-case-1--account-creation",children:"Use Case 1 \u2013 Account Creation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Guest App       React Native App      Supabase Auth       Email Provider\n    \u2502                  \u2502                    \u2502                    \u2502\n    \u2502\u2500\u2500 Open App \u2500\u2500\u2500\u2500\u2500\u2500\u25ba                    \u2502                    \u2502\n    \u2502\u25c4\u2500\u2500 Registration Screen \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500-\u2502                    \u2502\n    \u2502\u2500\u2500 Submit {username,email,password} \u2500\u2500\u25ba\u2502                    \u2502\n    \u2502                  \u2502\u2500\u2500 auth.signUp() \u2500\u2500\u25ba\u2502                    \u2502\n    \u2502                  \u2502                   \u2502\u2500\u2500 INSERT admins \u2500\u2500\u25ba DB\n    \u2502                  \u2502                   \u2502\u2500\u2500 sendEmail() \u2500\u2500\u2500\u2500\u2500\u25ba\u2502\n    \u2502                  \u2502\u25c4\u2500\u2500 session \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502                    \u2502\n    \u2502\u25c4\u2500\u2500 Success / redirect to Login \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502                    \u2502\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Steps:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"User opens the app and is directed to the registration screen."}),"\n",(0,r.jsxs)(n.li,{children:["User submits ",(0,r.jsx)(n.code,{children:"{ username, email, password, role }"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["React Native app calls ",(0,r.jsx)(n.code,{children:"supabase.auth.signUp()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Supabase Auth creates an ",(0,r.jsx)(n.code,{children:"auth.users"})," record and inserts an ",(0,r.jsx)(n.code,{children:"administrators"})," row."]}),"\n",(0,r.jsx)(n.li,{children:"Verification email is dispatched to the user's address."}),"\n",(0,r.jsx)(n.li,{children:"App displays a success message and navigates to the Login screen."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"use-case-2--signing-in",children:"Use Case 2 \u2013 Signing In"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"User App        React Native App      Supabase Auth       PostgreSQL\n    \u2502                  \u2502                    \u2502                  \u2502\n    \u2502\u2500\u2500 Enter email/password \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502                  \u2502\n    \u2502                  \u2502\u2500\u2500 auth.signInWithPassword() \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502\n    \u2502                  \u2502\u25c4\u2500\u2500 JWT session \u2500\u2500\u2500\u2500\u2502                  \u2502\n    \u2502                  \u2502\u2500\u2500 SELECT role, profile \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502\n    \u2502                  \u2502\u25c4\u2500\u2500 profile row \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2502\n    \u2502\u25c4\u2500\u2500 Home Screen (role-appropriate) \u2500\u2500\u2500\u2500\u2502                  \u2502\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Steps:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"User enters email and password on the Login screen."}),"\n",(0,r.jsxs)(n.li,{children:["App calls ",(0,r.jsx)(n.code,{children:"supabase.auth.signInWithPassword()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["On success, Supabase returns a JWT session stored via ",(0,r.jsx)(n.code,{children:"expo-secure-store"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"App fetches the user's role and profile from PostgreSQL."}),"\n",(0,r.jsx)(n.li,{children:"User is navigated to the Home screen appropriate for their role."}),"\n",(0,r.jsx)(n.li,{children:"On failure, an error toast is displayed and the user is prompted to retry."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"use-case-3--connecting-to-a-beacon",children:"Use Case 3 \u2013 Connecting to a Beacon"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"BLE Beacons     BLE Scanner     Context Interpreter    Supabase API    AAC UI\n    \u2502                \u2502                  \u2502                   \u2502              \u2502\n    \u2502\u2500\u2500 broadcast \u2500\u2500\u25ba\u2502                  \u2502                   \u2502              \u2502\n    \u2502                \u2502\u2500\u2500 onDetected() \u2500\u25ba\u2502                   \u2502              \u2502\n    \u2502                \u2502                  \u2502\u2500\u2500 resolveLocation()              \u2502\n    \u2502                \u2502                  \u2502\u2500\u2500 fetchVocabulary(locId,userId)\u2500\u25ba\u2502\n    \u2502                \u2502                  \u2502\u25c4\u2500\u2500 {words, weights, icons} \u2500\u2500\u2500\u2500\u2500\u2500\u2502\n    \u2502                \u2502                  \u2502\u2500\u2500 cache payload                  \u2502\n    \u2502                \u2502                  \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 renderGrid() \u2500\u2500\u2500\u2500\u25ba\u2502\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Steps:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["BLE Scanner collects ",(0,r.jsx)(n.code,{children:"(UUID, RSSI)"})," pairs from nearby beacons using ",(0,r.jsx)(n.code,{children:"react-native-ble-plx"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"onBeaconDetected()"})," callback updates the ",(0,r.jsx)(n.code,{children:"Context Interpreter"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"resolveLocation()"})," selects the highest-RSSI beacon and maps it to a ",(0,r.jsx)(n.code,{children:"locationId"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["App fetches the personalized vocabulary from Supabase using ",(0,r.jsx)(n.code,{children:"locationId"})," and ",(0,r.jsx)(n.code,{children:"userId"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"The payload is written to the local AsyncStorage cache for offline fallback."}),"\n",(0,r.jsx)(n.li,{children:"AAC UI renders the location-specific icon grid."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"use-case-4--using-vocabulary-for-communication",children:"Use Case 4 \u2013 Using Vocabulary for Communication"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Child User      AAC UI         Sentence Builder     expo-speech      Supabase\n    \u2502              \u2502                  \u2502                   \u2502              \u2502\n    \u2502\u2500\u2500 tap icon \u2500\u25ba\u2502                  \u2502                   \u2502              \u2502\n    \u2502              \u2502\u2500\u2500 addWord() \u2500\u2500\u2500\u2500\u25ba\u2502                   \u2502              \u2502\n    \u2502              \u2502\u25c4\u2500\u2500 updated phrase\u2502                   \u2502              \u2502\n    \u2502\u2500\u2500 tap Speak \u2500\u25ba                  \u2502                   \u2502              \u2502\n    \u2502              \u2502\u2500\u2500 speak() \u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502                   \u2502              \u2502\n    \u2502              \u2502                  \u2502\u2500\u2500 Speech.speak() \u25ba\u2502              \u2502\n    \u2502              \u2502                  \u2502                   \u2502\u2500\u2500 audio out  \u2502\n    \u2502              \u2502\u2500\u2500 INSERT usage_log \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u25ba\u2502\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Steps:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"User taps an icon on the AAC grid."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"addWord()"})," appends the word to the Sentence Builder's token array; the phrase strip updates."]}),"\n",(0,r.jsx)(n.li,{children:"User repeats taps to build a sentence."}),"\n",(0,r.jsxs)(n.li,{children:["User taps the ",(0,r.jsx)(n.strong,{children:"Speak"})," button."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"expo-speech"})," vocalises the phrase through the device speaker."]}),"\n",(0,r.jsxs)(n.li,{children:["A ",(0,r.jsx)(n.code,{children:"usage_log"})," row is inserted asynchronously to Supabase for future suggestion ranking."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"use-case-5--updating-favorite-words-admin",children:"Use Case 5 \u2013 Updating Favorite Words (Admin)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Admin User      Admin Screen     Supabase API     Realtime     Client Devices\n    \u2502                \u2502                 \u2502              \u2502               \u2502\n    \u2502\u2500\u2500 navigate to Vocab Prefs \u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502              \u2502               \u2502\n    \u2502                \u2502\u2500\u2500 fetchWords(locationId) \u2500\u2500\u2500\u2500\u2500\u25ba\u2502              \u2502\n    \u2502                \u2502\u25c4\u2500\u2500 current word list \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502              \u2502\n    \u2502\u2500\u2500 add/remove/reweight words \u2500\u2500\u2500\u2500\u25ba\u2502              \u2502               \u2502\n    \u2502\u2500\u2500 tap Save \u2500\u2500\u2500\u2500\u25ba                 \u2502              \u2502               \u2502\n    \u2502                \u2502\u2500\u2500 UPSERT location_words \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba              \u2502\n    \u2502                \u2502\u25c4\u2500\u2500 success \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2502              \u2502\n    \u2502                \u2502                 \u2502\u2500\u2500 broadcast change event \u2500\u2500\u2500\u25ba\u2502\n    \u2502                \u2502                 \u2502              \u2502\u2500\u2500 re-fetch \u2500\u2500\u25ba\u2502\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Steps:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Admin navigates to the Vocabulary Preferences screen for a selected location."}),"\n",(0,r.jsx)(n.li,{children:"Current word list is fetched from Supabase."}),"\n",(0,r.jsx)(n.li,{children:"Admin adds, removes, or adjusts the weight of words in the UI."}),"\n",(0,r.jsxs)(n.li,{children:["Admin taps ",(0,r.jsx)(n.strong,{children:"Save"}),"; the app sends an UPSERT to the ",(0,r.jsx)(n.code,{children:"location_words"})," table."]}),"\n",(0,r.jsx)(n.li,{children:"Supabase Realtime broadcasts the change to all connected client devices."}),"\n",(0,r.jsx)(n.li,{children:"Clients silently re-fetch the updated vocabulary."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"use-case-6--beacon-connection-failure-handling",children:"Use Case 6 \u2013 Beacon Connection Failure Handling"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'Child Device    BLE Scanner     Context Interpreter    AsyncStorage    Admin\n    \u2502                \u2502                  \u2502                   \u2502            \u2502\n    \u2502                \u2502\u2500\u2500 startScan() \u2500\u2500\u2500\u25ba                   \u2502            \u2502\n    \u2502                \u2502\u2500\u2500 timeout (no signal) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502            \u2502\n    \u2502                \u2502                  \u2502\u2500\u2500 loadFallback() \u25ba\u2502            \u2502\n    \u2502                \u2502                  \u2502\u25c4\u2500\u2500 cached vocab \u2500\u2500\u2502            \u2502\n    \u2502\u25c4\u2500\u2500 renderGrid(fallbackWords) \u2500\u2500\u2500\u2500\u2500\u2502                   \u2502            \u2502\n    \u2502\u25c4\u2500\u2500 "Offline Mode" banner \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502                   \u2502            \u2502\n    \u2502                \u2502                  \u2502\u2500\u2500 notifyAdmin() \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Steps:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["BLE Scanner calls ",(0,r.jsx)(n.code,{children:"startScan()"})," but times out with no beacon signal detected."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Context Interpreter"})," raises a ",(0,r.jsx)(n.code,{children:"BeaconNotFoundError"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"The app loads the last successfully fetched vocabulary from AsyncStorage."}),"\n",(0,r.jsx)(n.li,{children:'The AAC grid is rendered with the fallback vocabulary; a non-intrusive "Offline Mode" banner is shown.'}),"\n",(0,r.jsx)(n.li,{children:"An alert is dispatched to the linked administrator via Supabase Edge Function."}),"\n",(0,r.jsx)(n.li,{children:"The child user continues communication without interruption."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-database-design",children:"6. Database Design"}),"\n",(0,r.jsx)(n.h3,{id:"61-entity-relationship-overview",children:"6.1 Entity-Relationship Overview"}),"\n",(0,r.jsx)(n.p,{children:"The database comprises six core entities:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"organizations"})," ",(0,r.jsx)(n.strong,{children:"(1)"})," \u2014 administers \u2014 ",(0,r.jsx)(n.strong,{children:"(N)"})," ",(0,r.jsx)(n.code,{children:"administrators"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"administrators"})," ",(0,r.jsx)(n.strong,{children:"(1)"})," \u2014 manages \u2014 ",(0,r.jsx)(n.strong,{children:"(N)"})," ",(0,r.jsx)(n.code,{children:"user_accounts"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"administrators"})," ",(0,r.jsx)(n.strong,{children:"(1)"})," \u2014 registers \u2014 ",(0,r.jsx)(n.strong,{children:"(N)"})," ",(0,r.jsx)(n.code,{children:"beacons"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"beacons"})," ",(0,r.jsx)(n.strong,{children:"(N)"})," \u2014 associated with \u2014 ",(0,r.jsx)(n.strong,{children:"(1)"})," ",(0,r.jsx)(n.code,{children:"locations"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"locations"})," ",(0,r.jsx)(n.strong,{children:"(M)"})," \u2014 linked to \u2014 ",(0,r.jsx)(n.strong,{children:"(N)"})," ",(0,r.jsx)(n.code,{children:"vocabulary_words"})," via ",(0,r.jsx)(n.code,{children:"location_words"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user_accounts"})," ",(0,r.jsx)(n.strong,{children:"(1)"})," \u2014 generates \u2014 ",(0,r.jsx)(n.strong,{children:"(N)"})," ",(0,r.jsx)(n.code,{children:"usage_logs"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"usage_logs"})," \u2014 references \u2014 ",(0,r.jsx)(n.code,{children:"vocabulary_words"})," and ",(0,r.jsx)(n.code,{children:"locations"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"62-table-design",children:"6.2 Table Design"}),"\n",(0,r.jsx)(n.h4,{id:"organizations",children:"organizations"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Column"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Constraints"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"org_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsxs)(n.td,{children:["PK, default ",(0,r.jsx)(n.code,{children:"gen_random_uuid()"})]}),(0,r.jsx)(n.td,{children:"Unique organization identifier"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"name"})}),(0,r.jsx)(n.td,{children:"text"}),(0,r.jsx)(n.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsx)(n.td,{children:"Organization or facility name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"created_at"})}),(0,r.jsx)(n.td,{children:"timestamptz"}),(0,r.jsxs)(n.td,{children:["DEFAULT ",(0,r.jsx)(n.code,{children:"now()"})]}),(0,r.jsx)(n.td,{children:"Record creation timestamp"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"administrators",children:"administrators"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Column"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Constraints"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"admin_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsxs)(n.td,{children:["PK, FK \u2192 ",(0,r.jsx)(n.code,{children:"auth.users.id"})]}),(0,r.jsx)(n.td,{children:"Linked to Supabase Auth user"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"org_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsxs)(n.td,{children:["FK \u2192 ",(0,r.jsx)(n.code,{children:"organizations.org_id"})]}),(0,r.jsx)(n.td,{children:"Owning organization"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"email"})}),(0,r.jsx)(n.td,{children:"text"}),(0,r.jsx)(n.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsx)(n.td,{children:"Login and security email"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"is_main"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"DEFAULT false"}),(0,r.jsx)(n.td,{children:"True for Main Administrator"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"is_verified"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"DEFAULT false"}),(0,r.jsx)(n.td,{children:"Verified by Main Administrator"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"created_at"})}),(0,r.jsx)(n.td,{children:"timestamptz"}),(0,r.jsxs)(n.td,{children:["DEFAULT ",(0,r.jsx)(n.code,{children:"now()"})]}),(0,r.jsx)(n.td,{children:"Account creation timestamp"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"user_accounts",children:"user_accounts"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Column"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Constraints"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"user_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsxs)(n.td,{children:["PK, default ",(0,r.jsx)(n.code,{children:"gen_random_uuid()"})]}),(0,r.jsx)(n.td,{children:"Unique user identifier"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"admin_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsxs)(n.td,{children:["FK \u2192 ",(0,r.jsx)(n.code,{children:"administrators.admin_id"})]}),(0,r.jsx)(n.td,{children:"Administering admin"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"display_name"})}),(0,r.jsx)(n.td,{children:"text"}),(0,r.jsx)(n.td,{children:"NOT NULL"}),(0,r.jsx)(n.td,{children:"Name shown in the UI"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"accessibility_prefs"})}),(0,r.jsx)(n.td,{children:"jsonb"}),(0,r.jsxs)(n.td,{children:["DEFAULT ",(0,r.jsx)(n.code,{children:"'{}'"})]}),(0,r.jsx)(n.td,{children:"Font size, contrast, layout prefs"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"created_at"})}),(0,r.jsx)(n.td,{children:"timestamptz"}),(0,r.jsxs)(n.td,{children:["DEFAULT ",(0,r.jsx)(n.code,{children:"now()"})]}),(0,r.jsx)(n.td,{children:"Account creation timestamp"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"locations",children:"locations"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Column"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Constraints"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"location_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsx)(n.td,{children:"PK"}),(0,r.jsx)(n.td,{children:"Unique location identifier"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"admin_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsxs)(n.td,{children:["FK \u2192 ",(0,r.jsx)(n.code,{children:"administrators"})]}),(0,r.jsx)(n.td,{children:"Admin who created this location"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"name"})}),(0,r.jsx)(n.td,{children:"text"}),(0,r.jsx)(n.td,{children:"NOT NULL"}),(0,r.jsx)(n.td,{children:"Human-readable room name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"description"})}),(0,r.jsx)(n.td,{children:"text"}),(0,r.jsx)(n.td,{children:"nullable"}),(0,r.jsx)(n.td,{children:"Optional notes about the space"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"created_at"})}),(0,r.jsx)(n.td,{children:"timestamptz"}),(0,r.jsxs)(n.td,{children:["DEFAULT ",(0,r.jsx)(n.code,{children:"now()"})]}),(0,r.jsx)(n.td,{children:"Record creation timestamp"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"beacons",children:"beacons"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Column"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Constraints"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"beacon_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsx)(n.td,{children:"PK"}),(0,r.jsx)(n.td,{children:"Unique beacon record identifier"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ble_uuid"})}),(0,r.jsx)(n.td,{children:"text"}),(0,r.jsx)(n.td,{children:"NOT NULL, UNIQUE"}),(0,r.jsx)(n.td,{children:"Broadcast UUID from hardware"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"location_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsxs)(n.td,{children:["FK \u2192 ",(0,r.jsx)(n.code,{children:"locations"})]}),(0,r.jsx)(n.td,{children:"Room this beacon represents"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"title"})}),(0,r.jsx)(n.td,{children:"text"}),(0,r.jsx)(n.td,{children:"NOT NULL"}),(0,r.jsx)(n.td,{children:"Display name set by admin"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"registered_by"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsxs)(n.td,{children:["FK \u2192 ",(0,r.jsx)(n.code,{children:"administrators"})]}),(0,r.jsx)(n.td,{children:"Admin who paired the beacon"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"created_at"})}),(0,r.jsx)(n.td,{children:"timestamptz"}),(0,r.jsxs)(n.td,{children:["DEFAULT ",(0,r.jsx)(n.code,{children:"now()"})]}),(0,r.jsx)(n.td,{children:"Pairing timestamp"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"vocabulary_words",children:"vocabulary_words"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Column"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Constraints"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"word_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsx)(n.td,{children:"PK"}),(0,r.jsx)(n.td,{children:"Unique word identifier"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"text"})}),(0,r.jsx)(n.td,{children:"text"}),(0,r.jsx)(n.td,{children:"NOT NULL"}),(0,r.jsx)(n.td,{children:"The word or phrase string"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"icon_url"})}),(0,r.jsx)(n.td,{children:"text"}),(0,r.jsx)(n.td,{children:"nullable"}),(0,r.jsx)(n.td,{children:"Path in Supabase Storage bucket"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"category"})}),(0,r.jsx)(n.td,{children:"text"}),(0,r.jsx)(n.td,{children:"nullable"}),(0,r.jsxs)(n.td,{children:["Grouping label (e.g. ",(0,r.jsx)(n.code,{children:"'actions'"}),")"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"created_by"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsxs)(n.td,{children:["FK \u2192 ",(0,r.jsx)(n.code,{children:"administrators"})]}),(0,r.jsx)(n.td,{children:"Admin who added the word"})]})]})]}),"\n",(0,r.jsxs)(n.h4,{id:"location_words-junction",children:["location_words ",(0,r.jsx)(n.em,{children:"(junction)"})]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Column"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Constraints"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"location_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsxs)(n.td,{children:["FK \u2192 ",(0,r.jsx)(n.code,{children:"locations"})]}),(0,r.jsx)(n.td,{children:"Linked location"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"word_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsxs)(n.td,{children:["FK \u2192 ",(0,r.jsx)(n.code,{children:"vocabulary_words"})]}),(0,r.jsx)(n.td,{children:"Linked word"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"weight"})}),(0,r.jsx)(n.td,{children:"float4"}),(0,r.jsxs)(n.td,{children:["DEFAULT ",(0,r.jsx)(n.code,{children:"1.0"})]}),(0,r.jsx)(n.td,{children:"Admin-assigned relevance weight"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"PRIMARY KEY"}),(0,r.jsx)(n.td,{children:"\u2014"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(location_id, word_id)"})}),(0,r.jsx)(n.td,{children:"Composite primary key"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"usage_logs",children:"usage_logs"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Column"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Constraints"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"log_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsxs)(n.td,{children:["PK, default ",(0,r.jsx)(n.code,{children:"gen_random_uuid()"})]}),(0,r.jsx)(n.td,{children:"Unique log entry"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"user_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsxs)(n.td,{children:["FK \u2192 ",(0,r.jsx)(n.code,{children:"user_accounts"})]}),(0,r.jsx)(n.td,{children:"User who selected the word"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"word_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsxs)(n.td,{children:["FK \u2192 ",(0,r.jsx)(n.code,{children:"vocabulary_words"})]}),(0,r.jsx)(n.td,{children:"Word that was selected"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"location_id"})}),(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsxs)(n.td,{children:["FK \u2192 ",(0,r.jsx)(n.code,{children:"locations"}),", nullable"]}),(0,r.jsx)(n.td,{children:"Location when word was selected"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"selected_at"})}),(0,r.jsx)(n.td,{children:"timestamptz"}),(0,r.jsxs)(n.td,{children:["DEFAULT ",(0,r.jsx)(n.code,{children:"now()"})]}),(0,r.jsx)(n.td,{children:"Timestamp of selection event"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"7-algorithms",children:"7. Algorithms"}),"\n",(0,r.jsx)(n.h3,{id:"71-location-resolution-algorithm",children:"7.1 Location Resolution Algorithm"}),"\n",(0,r.jsxs)(n.p,{children:["The system determines which location the user is currently in given a set of active BLE beacon signals via ",(0,r.jsx)(n.code,{children:"react-native-ble-plx"}),". The algorithm operates as follows:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Collect RSSI Samples"})," \u2013 The BLE scanner collects ",(0,r.jsx)(n.code,{children:"(uuid, rssi)"})," pairs over a 500 ms window to smooth signal noise."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Average RSSI"})," \u2013 For each unique ",(0,r.jsx)(n.code,{children:"uuid"}),", compute the mean RSSI over the sampling window."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Select Primary Beacon"})," \u2013 Choose the ",(0,r.jsx)(n.code,{children:"uuid"})," with the highest mean RSSI. This maps directly to a ",(0,r.jsx)(n.code,{children:"location_id"})," via the ",(0,r.jsx)(n.code,{children:"beacons"})," table."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Apply Proximity Weighting"}),' \u2013 Beacons within 10 dBm of the primary beacon are considered "nearby." Vocabulary sets for nearby locations are blended into suggestions at a lower weight (configurable, default ',(0,r.jsx)(n.code,{children:"0.3"}),") relative to the primary location (weight ",(0,r.jsx)(n.code,{children:"1.0"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Hysteresis Guard"})," \u2013 To prevent rapid location switching as a user moves between areas, the resolved location only changes if the new primary beacon has been dominant for at least two consecutive sampling windows."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"function resolveLocation(beaconReadings) {\n  const averaged = groupBy(beaconReadings, 'uuid').map(avgRssi);\n  const primary  = maxBy(averaged, 'rssi');\n  const nearby   = averaged.filter(b => b.rssi >= primary.rssi - 10);\n\n  if (primary.uuid === lastPrimary) {\n    stableCount++;\n  } else {\n    stableCount = 0;\n    lastPrimary = primary.uuid;\n  }\n\n  if (stableCount >= 2) {\n    currentLocation  = lookupLocation(primary.uuid);\n    nearbyLocations  = nearby.map(b => lookupLocation(b.uuid));\n  }\n  return { currentLocation, nearbyLocations };\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"72-word-suggestion-ranking-algorithm",children:"7.2 Word Suggestion Ranking Algorithm"}),"\n",(0,r.jsx)(n.p,{children:"Given a resolved location (and optionally a set of nearby locations), the system ranks the vocabulary for display in the AAC grid. The ranking score for each word is:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Score(word, user, location) = locationWeight \xd7 adminWeight \xd7 log(1 + usageCount)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Where:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"locationWeight"})," \u2013 ",(0,r.jsx)(n.code,{children:"1.0"})," for the primary location; ",(0,r.jsx)(n.code,{children:"0.3"})," (configurable) for nearby locations."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"adminWeight"})," \u2013 the ",(0,r.jsx)(n.code,{children:"weight"})," value stored in ",(0,r.jsx)(n.code,{children:"location_words"})," for this ",(0,r.jsx)(n.code,{children:"(location, word)"})," pair; defaults to ",(0,r.jsx)(n.code,{children:"1.0"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"usageCount"})," \u2013 the number of times this user has selected this word at this location, derived from ",(0,r.jsx)(n.code,{children:"usage_logs"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Words are sorted descending by Score. The top N words (default grid size: 4 \xd7 6 = 24) fill the ",(0,r.jsx)(n.strong,{children:"Suggested"})," landing page. Remaining words are accessible through category tabs following the standard AAC grid layout."]}),"\n",(0,r.jsx)(n.h3,{id:"73-offline-fallback-strategy",children:"7.3 Offline Fallback Strategy"}),"\n",(0,r.jsx)(n.p,{children:"When beacon detection fails or the device has no network connectivity, the system employs the following fallback cascade:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Attempt to load the last successfully fetched vocabulary set from AsyncStorage."}),"\n",(0,r.jsx)(n.li,{children:'If no cached set exists for the current user, load a generic "core vocabulary" board stored as a static JSON asset bundled with the app.'}),"\n",(0,r.jsx)(n.li,{children:"Display a non-intrusive status banner informing the user that offline mode is active."}),"\n",(0,r.jsx)(n.li,{children:"Periodically retry beacon scanning and network requests in the background; when connectivity is restored, seamlessly update the displayed vocabulary without interrupting the user."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"8-non-functional-design-decisions",children:"8. Non-Functional Design Decisions"}),"\n",(0,r.jsx)(n.h3,{id:"81-responsiveness",children:"8.1 Responsiveness"}),"\n",(0,r.jsxs)(n.p,{children:["The React Native app uses the ",(0,r.jsx)(n.code,{children:"Dimensions"})," API and Flexbox to adapt the AAC icon grid to different device form factors (phones, tablets). The grid column count adjusts automatically \u2014 typically 3\u20134 columns on phones and 5\u20136 on tablets. Touch targets meet a minimum of ",(0,r.jsx)(n.strong,{children:"48 \xd7 48 dp"})," in accordance with WCAG 2.1 AA and platform human interface guidelines."]}),"\n",(0,r.jsx)(n.h3,{id:"82-security",children:"8.2 Security"}),"\n",(0,r.jsx)(n.p,{children:"Supabase Row Level Security (RLS) policies ensure that:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Administrators can only read and write records belonging to their own organization."}),"\n",(0,r.jsx)(n.li,{children:"Child user data is accessible only to administrators linked to that user."}),"\n",(0,r.jsx)(n.li,{children:"Usage logs are write-only for client devices; read access is restricted to administrators."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["All client-server communication occurs over HTTPS. JWT tokens are short-lived (1 hour) and refreshed automatically by the Supabase JS client library. Tokens are stored in ",(0,r.jsx)(n.code,{children:"expo-secure-store"})," (encrypted native keychain) rather than AsyncStorage."]}),"\n",(0,r.jsx)(n.h3,{id:"83-scalability",children:"8.3 Scalability"}),"\n",(0,r.jsx)(n.p,{children:"Supabase is backed by a managed PostgreSQL instance that can be vertically or horizontally scaled. Read-heavy vocabulary fetches are offloaded by caching at the client level (AsyncStorage) and, optionally, by a Supabase Edge Function that caches location vocabulary aggregates for sub-10 ms response times under high concurrency."}),"\n",(0,r.jsx)(n.h3,{id:"84-aac-device-interoperability",children:"8.4 AAC Device Interoperability"}),"\n",(0,r.jsxs)(n.p,{children:["The system exposes a JSON export endpoint that packages a user's vocabulary sets in ",(0,r.jsx)(n.strong,{children:"Open Board Format (OBF)"}),", a community standard for AAC content exchange. Compatible third-party AAC devices that support OBF can import this data directly, satisfying the non-functional requirement to detect and port context to other AAC devices."]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);