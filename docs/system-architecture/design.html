<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-system-architecture/design" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Design Document – Part I: Architecture | Project Professional Group One Llc</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://Capstone-Projects-2026-spring.github.io/project-professional-group-one-llc/docs/system-architecture/design"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Design Document – Part I: Architecture | Project Professional Group One Llc"><meta data-rh="true" name="description" content="1. Introduction"><meta data-rh="true" property="og:description" content="1. Introduction"><link data-rh="true" rel="icon" href="/project-professional-group-one-llc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Capstone-Projects-2026-spring.github.io/project-professional-group-one-llc/docs/system-architecture/design"><link data-rh="true" rel="alternate" href="https://Capstone-Projects-2026-spring.github.io/project-professional-group-one-llc/docs/system-architecture/design" hreflang="en"><link data-rh="true" rel="alternate" href="https://Capstone-Projects-2026-spring.github.io/project-professional-group-one-llc/docs/system-architecture/design" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"System Architecture","item":"https://Capstone-Projects-2026-spring.github.io/project-professional-group-one-llc/docs/category/system-architecture"},{"@type":"ListItem","position":2,"name":"Design Document – Part I: Architecture","item":"https://Capstone-Projects-2026-spring.github.io/project-professional-group-one-llc/docs/system-architecture/design"}]}</script><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script><link rel="stylesheet" href="/project-professional-group-one-llc/assets/css/styles.7aa687c6.css">
<script src="/project-professional-group-one-llc/assets/js/runtime~main.711f83b3.js" defer="defer"></script>
<script src="/project-professional-group-one-llc/assets/js/main.fc23a9cd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/project-professional-group-one-llc/"><div class="navbar__logo"><img src="https://upload.wikimedia.org/wikipedia/commons/1/17/Temple_T_logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="https://upload.wikimedia.org/wikipedia/commons/1/17/Temple_T_logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Project Professional Group One Llc</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/project-professional-group-one-llc/docs/intro">Documentation</a><a class="navbar__item navbar__link" href="/project-professional-group-one-llc/tutorial/Intro">Docusaurus Tutorial</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/Capstone-Projects-2026-spring/project-professional-group-one-llc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/project-professional-group-one-llc/docs/intro"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/project-professional-group-one-llc/docs/category/requirements-specification"><span title="Requirements Specification" class="categoryLinkLabel_W154">Requirements Specification</span></a><button aria-label="Expand sidebar category &#x27;Requirements Specification&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/project-professional-group-one-llc/docs/category/system-architecture"><span title="System Architecture" class="categoryLinkLabel_W154">System Architecture</span></a><button aria-label="Collapse sidebar category &#x27;System Architecture&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/project-professional-group-one-llc/docs/system-architecture/design"><span title="Design Document – Part I: Architecture" class="linkLabel_WmDU">Design Document – Part I: Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/project-professional-group-one-llc/docs/system-architecture/development-environment"><span title="Development Environment" class="linkLabel_WmDU">Development Environment</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/project-professional-group-one-llc/docs/system-architecture/version-control"><span title="Version Control" class="linkLabel_WmDU">Version Control</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/project-professional-group-one-llc/docs/category/api-specification"><span title="API Specification" class="categoryLinkLabel_W154">API Specification</span></a><button aria-label="Expand sidebar category &#x27;API Specification&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/project-professional-group-one-llc/docs/category/test-procedures"><span title="Test Procedures" class="categoryLinkLabel_W154">Test Procedures</span></a><button aria-label="Expand sidebar category &#x27;Test Procedures&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/project-professional-group-one-llc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/project-professional-group-one-llc/docs/category/system-architecture"><span>System Architecture</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Design Document – Part I: Architecture</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Design Document – Part I: Architecture</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-introduction">1. Introduction<a href="#1-introduction" class="hash-link" aria-label="Direct link to 1. Introduction" title="Direct link to 1. Introduction" translate="no">​</a></h2>
<p>This document describes the software architecture for <strong>AAC Beacon</strong>, a location-aware Augmentative and Alternative Communication (AAC) mobile application built with React Native. It maps the system requirements to the architectural design, explains component relationships, presents class and sequence diagrams, and describes the database schema and core algorithms.</p>
<p>AAC Beacon reduces communication friction for users who rely on AAC by automatically surfacing the vocabulary most relevant to their current physical environment. Bluetooth Low Energy (BLE) beacons act as room identifiers; when a user&#x27;s device detects a beacon, the application instantly loads a personalized, location-specific word set rather than requiring the user to navigate multiple menus.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-system-overview">2. System Overview<a href="#2-system-overview" class="hash-link" aria-label="Direct link to 2. System Overview" title="Direct link to 2. System Overview" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="21-architecture-style">2.1 Architecture Style<a href="#21-architecture-style" class="hash-link" aria-label="Direct link to 2.1 Architecture Style" title="Direct link to 2.1 Architecture Style" translate="no">​</a></h3>
<p>AAC Beacon follows a <strong>client-server architecture</strong> with a React Native mobile application on the front end and Supabase (PostgreSQL + Auth + Storage) as the back-end platform. The system has three primary layers:</p>
<ul>
<li class=""><strong>Bluetooth Beacon Layer</strong> – physical BLE beacons deployed in rooms that broadcast unique identifiers.</li>
<li class=""><strong>Client Layer</strong> – a React Native app running on the user&#x27;s iOS or Android device that scans for beacons and renders the AAC interface natively.</li>
<li class=""><strong>Backend Layer</strong> – Supabase services that store user profiles, location metadata, AAC vocabulary, and usage logs.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="22-technology-stack">2.2 Technology Stack<a href="#22-technology-stack" class="hash-link" aria-label="Direct link to 2.2 Technology Stack" title="Direct link to 2.2 Technology Stack" translate="no">​</a></h3>
<table><thead><tr><th>Layer</th><th>Technology</th><th>Purpose</th></tr></thead><tbody><tr><td>Mobile App</td><td>React Native (Expo)</td><td>Cross-platform iOS/Android native UI</td></tr><tr><td>BLE Scanning</td><td><code>react-native-ble-plx</code></td><td>Detect nearby beacons and RSSI values</td></tr><tr><td>Text-to-Speech</td><td><code>expo-speech</code></td><td>Convert constructed sentences to audio</td></tr><tr><td>Local Storage</td><td><code>expo-secure-store</code> / AsyncStorage</td><td>Session persistence and offline cache</td></tr><tr><td>Backend</td><td>Supabase</td><td>PostgreSQL DB, Auth (JWT/RLS), Storage, Realtime</td></tr><tr><td>Deployment</td><td>Expo EAS Build</td><td>Native binary builds for iOS and Android</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-component-descriptions-and-interfaces">3. Component Descriptions and Interfaces<a href="#3-component-descriptions-and-interfaces" class="hash-link" aria-label="Direct link to 3. Component Descriptions and Interfaces" title="Direct link to 3. Component Descriptions and Interfaces" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="31-bluetooth-beacon-layer">3.1 Bluetooth Beacon Layer<a href="#31-bluetooth-beacon-layer" class="hash-link" aria-label="Direct link to 3.1 Bluetooth Beacon Layer" title="Direct link to 3.1 Bluetooth Beacon Layer" translate="no">​</a></h3>
<p>Physical BLE beacons (iBeacon or Eddystone format) are deployed throughout the facility by an administrator. Each beacon broadcasts:</p>
<ul>
<li class=""><strong>UUID</strong> – a globally unique identifier registered in the Supabase database.</li>
<li class=""><strong>RSSI (Received Signal Strength Indicator)</strong> – used by the client to determine proximity.</li>
</ul>
<p>Beacons are passive transmitters; they do not receive or process data. An administrator pairs a beacon to a named location through the Admin screen and the pairing is stored in the database.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="32-react-native-mobile-application">3.2 React Native Mobile Application<a href="#32-react-native-mobile-application" class="hash-link" aria-label="Direct link to 3.2 React Native Mobile Application" title="Direct link to 3.2 React Native Mobile Application" translate="no">​</a></h3>
<p>The React Native app is organized into six functional modules:</p>
<table><thead><tr><th>Module</th><th>Responsibility</th></tr></thead><tbody><tr><td>BLE Scanning Module</td><td>Continuously scans for nearby beacons via <code>react-native-ble-plx</code>. Returns a list of <code>(UUID, RSSI)</code> pairs.</td></tr><tr><td>Context Interpreter</td><td>Selects the beacon with the highest RSSI (with weighted proximity blending for neighbouring locations) to determine the current room.</td></tr><tr><td>Local Cache</td><td>Maintains AsyncStorage-backed copies of recently fetched vocabulary boards for offline fallback.</td></tr><tr><td>AAC Interface</td><td>Renders the native icon grid, handles word selection, and passes chosen words to the Sentence Builder.</td></tr><tr><td>Sentence Builder</td><td>Maintains the current phrase, exposes add/delete/clear operations, and passes the final string to Speech Output.</td></tr><tr><td>Speech Output Trigger</td><td>Calls <code>expo-speech</code> (<code>Speech.speak()</code>) to vocalise the constructed phrase through the device speaker.</td></tr></tbody></table>
<p>The app requires the following native permissions:</p>
<ul>
<li class=""><code>BLUETOOTH_SCAN</code> / <code>BLUETOOTH_CONNECT</code> (Android 12+) or <code>NSBluetoothAlwaysUsageDescription</code> (iOS) – for BLE beacon scanning.</li>
<li class=""><code>android.permission.ACCESS_FINE_LOCATION</code> (Android) – required by the OS for BLE scanning.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="33-supabase-backend">3.3 Supabase Backend<a href="#33-supabase-backend" class="hash-link" aria-label="Direct link to 3.3 Supabase Backend" title="Direct link to 3.3 Supabase Backend" translate="no">​</a></h3>
<p>Supabase provides four services used by AAC Beacon:</p>
<ul>
<li class=""><strong>PostgreSQL Database</strong> – stores all persistent application data (see Section 6 for schema).</li>
<li class=""><strong>Auth (JWT + RLS)</strong> – manages administrator sessions via <code>@supabase/supabase-js</code>; row-level security policies enforce access rules.</li>
<li class=""><strong>Realtime</strong> – allows vocabulary changes made in the Admin screen to be pushed immediately to connected devices.</li>
<li class=""><strong>Storage Bucket</strong> – holds icon images and symbol assets uploaded by administrators.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="34-admin-screen">3.4 Admin Screen<a href="#34-admin-screen" class="hash-link" aria-label="Direct link to 3.4 Admin Screen" title="Direct link to 3.4 Admin Screen" translate="no">​</a></h3>
<p>A protected stack of React Native screens (accessible only after administrator login) that provides:</p>
<ul>
<li class="">Management of administrator and child user accounts.</li>
<li class="">Pairing of BLE beacons to named locations.</li>
<li class="">Assignment and weighting of vocabulary words per location.</li>
<li class="">View of usage analytics and logs.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="35-external-services">3.5 External Services<a href="#35-external-services" class="hash-link" aria-label="Direct link to 3.5 External Services" title="Direct link to 3.5 External Services" translate="no">​</a></h3>
<ul>
<li class=""><strong>expo-speech (TTS)</strong> – device-native, no external API key required. Falls back to platform TTS engine (iOS AVSpeechSynthesizer / Android TextToSpeech).</li>
<li class=""><strong>Email Provider (Supabase SMTP)</strong> – sends verification and password-reset emails to administrators.</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-class-diagrams">4. Class Diagrams<a href="#4-class-diagrams" class="hash-link" aria-label="Direct link to 4. Class Diagrams" title="Direct link to 4. Class Diagrams" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="41-user--account-management">4.1 User &amp; Account Management<a href="#41-user--account-management" class="hash-link" aria-label="Direct link to 4.1 User &amp; Account Management" title="Direct link to 4.1 User &amp; Account Management" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">┌─────────────────────────────┐        ┌─────────────────────────────┐</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│      MainAdministrator      │        │        Administrator         │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├──────────────  ───────────────┤        ├─────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - orgName: string           │        │ - adminId: uuid             │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - email: string             │ extends│ - email: string             │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - passwordHash: string      │◄───────│ - isVerified: boolean       │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├─────────────────────────────┤        ├─────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ + register()                │        │ + login()                   │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ + createAdmin()             │        │ + createUser()              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ + verifyAdmin()             │        │ + manageBeacon()            │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ + login()                   │        │ + manageVocab()             │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└─────────────────────────────┘        └──────────────┬──────────────┘</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                       │ 1..*</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                       ▼</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                       ┌─────────────────────────────┐</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                       │         UserAccount          │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                       ├─────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                       │ - userId: uuid              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                       │ - displayName: string       │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                       │ - adminOwner: uuid          │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                       │ - accessibilityPrefs: object│</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                       ├─────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                       │ + loadWordSet(locationId)   │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                       │ + logWordUsage(word)        │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                       │ + getContext()              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                       └─────────────────────────────┘</span><br></span></code></pre></div></div>
<p><strong>Relationships:</strong> <code>MainAdministrator</code> extends <code>Administrator</code> (inherits all admin capabilities and adds org-level controls). <code>Administrator</code> has a one-to-many relationship with <code>UserAccount</code>. All admin accounts must be verified by the <code>MainAdministrator</code> before becoming active.</p>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="42-beacon--location-domain">4.2 Beacon &amp; Location Domain<a href="#42-beacon--location-domain" class="hash-link" aria-label="Direct link to 4.2 Beacon &amp; Location Domain" title="Direct link to 4.2 Beacon &amp; Location Domain" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">┌─────────────────────────────┐        ┌─────────────────────────────┐</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│           Beacon            │  N:1   │          Location            │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├─────────────────────────────┤───── ──►├─────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - beaconId: uuid            │        │ - locationId: uuid          │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - bleUuid: string           │        │ - name: string              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - title: string             │        │ - adminId: uuid             │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - locationId: uuid          │        │ - description: string       │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├─────────────────────────────┤        ├─────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ + getSignalStrength()       │        │ + getVocabulary(userId)     │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ + getLocation()             │        │ + listNearbyLocations()     │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└─────────────────────────────┘        └─────────────────────────────┘</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">┌──────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│            BeaconScanner             │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├──────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - detectedBeacons: Map&lt;uuid, number&gt; │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - currentLocation: Location          │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - stableCount: number                │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├──────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ + startScan()                        │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ + stopScan()                         │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ + resolveLocation()                  │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ + onBeaconDetected(callback)         │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└──────────────────────────────────────┘</span><br></span></code></pre></div></div>
<p><strong>Relationships:</strong> Each <code>Beacon</code> is associated with exactly one <code>Location</code>. <code>BeaconScanner</code> observes multiple <code>Beacon</code> signals and resolves the strongest to a <code>Location</code>. <code>Location</code> has a many-to-many relationship with <code>VocabularyWord</code> through <code>LocationWord</code>.</p>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="43-vocabulary-domain">4.3 Vocabulary Domain<a href="#43-vocabulary-domain" class="hash-link" aria-label="Direct link to 4.3 Vocabulary Domain" title="Direct link to 4.3 Vocabulary Domain" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">┌───────────────────────┐     ┌───────────────────────┐</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│    VocabularyWord     │ M:N │     LocationWord       │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├───────────────────────┤◄────┤ (junction)             │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - wordId: uuid        │     ├───────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - text: string        │     │ - locationId: uuid    │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - iconUrl: string     │     │ - wordId: uuid        │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - category: string    │     │ - weight: float       │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├────  ───────────────────┤     ├───────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ + render()            │     │ + getWeight()         │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ + getIcon()           │     │ + setWeight(w)        │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└───────────────────────┘     └───────────────────────┘</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">┌───────────────────────┐     ┌───────────────────────┐</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│     UserContext       │     │    SentenceBuilder    │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├───────────────────────┤     ├───────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - userId: uuid        │     │ - tokens: string[]    │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - locationId: uuid    │     ├───────────────────────┤</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ - usageHistory: Map   │     │ + addWord(word)       │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├───────────────────────┤     │ + removeWord(index)   │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ + getSuggestions()    │     │ + clear()             │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│ + recordUsage(word)   │     │ + speak()             │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└───────────────────────┘     │ + toString()          │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                              └───────────────────────┘</span><br></span></code></pre></div></div>
<p><strong>Relationships:</strong> <code>VocabularyWord</code> is linked to <code>Location</code> via the junction class <code>LocationWord</code>, which carries an admin-assigned weight influencing suggestion ranking. <code>UserContext</code> tracks per-user word-usage frequency per location and feeds the suggestion algorithm. <code>SentenceBuilder</code> holds the transient phrase being constructed and triggers Speech Output via <code>expo-speech</code>.</p>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-sequence-diagrams">5. Sequence Diagrams<a href="#5-sequence-diagrams" class="hash-link" aria-label="Direct link to 5. Sequence Diagrams" title="Direct link to 5. Sequence Diagrams" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-case-1--account-creation">Use Case 1 – Account Creation<a href="#use-case-1--account-creation" class="hash-link" aria-label="Direct link to Use Case 1 – Account Creation" title="Direct link to Use Case 1 – Account Creation" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Guest App       React Native App      Supabase Auth       Email Provider</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                  │                    │                    │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │── Open App ──────►                    │                    │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │◄── Registration Screen ──────────────-│                    │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │── Submit {username,email,password} ──►│                    │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                  │── auth.signUp() ──►│                    │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                  │                   │── INSERT admins ──► DB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                  │                   │── sendEmail() ─────►│</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                  │◄── session ───────│                    │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │◄── Success / redirect to Login ───────│                    │</span><br></span></code></pre></div></div>
<p><strong>Steps:</strong></p>
<ol>
<li class="">User opens the app and is directed to the registration screen.</li>
<li class="">User submits <code>{ username, email, password, role }</code>.</li>
<li class="">React Native app calls <code>supabase.auth.signUp()</code>.</li>
<li class="">Supabase Auth creates an <code>auth.users</code> record and inserts an <code>administrators</code> row.</li>
<li class="">Verification email is dispatched to the user&#x27;s address.</li>
<li class="">App displays a success message and navigates to the Login screen.</li>
</ol>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-case-2--signing-in">Use Case 2 – Signing In<a href="#use-case-2--signing-in" class="hash-link" aria-label="Direct link to Use Case 2 – Signing In" title="Direct link to Use Case 2 – Signing In" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">User App        React Native App      Supabase Auth       PostgreSQL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                  │                    │                  │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │── Enter email/password ─────────────►│                  │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                  │── auth.signInWithPassword() ────────►│</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                  │◄── JWT session ────│                  │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                  │── SELECT role, profile ─────────────►│</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                  │◄── profile row ────────────────────── │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │◄── Home Screen (role-appropriate) ────│                  │</span><br></span></code></pre></div></div>
<p><strong>Steps:</strong></p>
<ol>
<li class="">User enters email and password on the Login screen.</li>
<li class="">App calls <code>supabase.auth.signInWithPassword()</code>.</li>
<li class="">On success, Supabase returns a JWT session stored via <code>expo-secure-store</code>.</li>
<li class="">App fetches the user&#x27;s role and profile from PostgreSQL.</li>
<li class="">User is navigated to the Home screen appropriate for their role.</li>
<li class="">On failure, an error toast is displayed and the user is prompted to retry.</li>
</ol>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-case-3--connecting-to-a-beacon">Use Case 3 – Connecting to a Beacon<a href="#use-case-3--connecting-to-a-beacon" class="hash-link" aria-label="Direct link to Use Case 3 – Connecting to a Beacon" title="Direct link to Use Case 3 – Connecting to a Beacon" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">BLE Beacons     BLE Scanner     Context Interpreter    Supabase API    AAC UI</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │                  │                   │              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │── broadcast ──►│                  │                   │              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │── onDetected() ─►│                   │              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │                  │── resolveLocation()              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │                  │── fetchVocabulary(locId,userId)─►│</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │                  │◄── {words, weights, icons} ──────│</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │                  │── cache payload                  │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │                  │─────────────── renderGrid() ────►│</span><br></span></code></pre></div></div>
<p><strong>Steps:</strong></p>
<ol>
<li class="">BLE Scanner collects <code>(UUID, RSSI)</code> pairs from nearby beacons using <code>react-native-ble-plx</code>.</li>
<li class=""><code>onBeaconDetected()</code> callback updates the <code>Context Interpreter</code>.</li>
<li class=""><code>resolveLocation()</code> selects the highest-RSSI beacon and maps it to a <code>locationId</code>.</li>
<li class="">App fetches the personalized vocabulary from Supabase using <code>locationId</code> and <code>userId</code>.</li>
<li class="">The payload is written to the local AsyncStorage cache for offline fallback.</li>
<li class="">AAC UI renders the location-specific icon grid.</li>
</ol>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-case-4--using-vocabulary-for-communication">Use Case 4 – Using Vocabulary for Communication<a href="#use-case-4--using-vocabulary-for-communication" class="hash-link" aria-label="Direct link to Use Case 4 – Using Vocabulary for Communication" title="Direct link to Use Case 4 – Using Vocabulary for Communication" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Child User      AAC UI         Sentence Builder     expo-speech      Supabase</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │              │                  │                   │              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │── tap icon ─►│                  │                   │              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │              │── addWord() ────►│                   │              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │              │◄── updated phrase│                   │              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │── tap Speak ─►                  │                   │              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │              │─  ─ speak() ──────►│                   │              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │              │                  │── Speech.speak() ►│              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │              │                  │                   │── audio out  │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │              │── INSERT usage_log ─────────────────────────────── ►│</span><br></span></code></pre></div></div>
<p><strong>Steps:</strong></p>
<ol>
<li class="">User taps an icon on the AAC grid.</li>
<li class=""><code>addWord()</code> appends the word to the Sentence Builder&#x27;s token array; the phrase strip updates.</li>
<li class="">User repeats taps to build a sentence.</li>
<li class="">User taps the <strong>Speak</strong> button.</li>
<li class=""><code>expo-speech</code> vocalises the phrase through the device speaker.</li>
<li class="">A <code>usage_log</code> row is inserted asynchronously to Supabase for future suggestion ranking.</li>
</ol>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-case-5--updating-favorite-words-admin">Use Case 5 – Updating Favorite Words (Admin)<a href="#use-case-5--updating-favorite-words-admin" class="hash-link" aria-label="Direct link to Use Case 5 – Updating Favorite Words (Admin)" title="Direct link to Use Case 5 – Updating Favorite Words (Admin)" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Admin User      Admin Screen     Supabase API     Realtime     Client Devices</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │                 │              │               │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │── navigate to Vocab Prefs ──────►│              │               │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │── fetchWords(locationId) ─────►│              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │◄── current word list ──────────│              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │── add/remove/reweight words ────►│              │               │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │── tap Save ────►                 │              │               │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │── UPSERT location_words ───────►              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │◄── success ─────────────────── │              │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │                 │── broadcast change event ───►│</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │                 │              │── re-fetch ──►│</span><br></span></code></pre></div></div>
<p><strong>Steps:</strong></p>
<ol>
<li class="">Admin navigates to the Vocabulary Preferences screen for a selected location.</li>
<li class="">Current word list is fetched from Supabase.</li>
<li class="">Admin adds, removes, or adjusts the weight of words in the UI.</li>
<li class="">Admin taps <strong>Save</strong>; the app sends an UPSERT to the <code>location_words</code> table.</li>
<li class="">Supabase Realtime broadcasts the change to all connected client devices.</li>
<li class="">Clients silently re-fetch the updated vocabulary.</li>
</ol>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-case-6--beacon-connection-failure-handling">Use Case 6 – Beacon Connection Failure Handling<a href="#use-case-6--beacon-connection-failure-handling" class="hash-link" aria-label="Direct link to Use Case 6 – Beacon Connection Failure Handling" title="Direct link to Use Case 6 – Beacon Connection Failure Handling" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Child Device    BLE Scanner     Context Interpreter    AsyncStorage    Admin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │                  │                   │            │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │── startScan() ───►                   │            │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │── timeout (no signal) ──────────────►│            │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │                  │── loadFallback() ►│            │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │                  │◄── cached vocab ──│            │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │◄── renderGrid(fallbackWords) ─────│                   │            │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │◄── &quot;Offline Mode&quot; banner ─────────│                   │            │</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    │                │                  │── notifyAdmin() ──────────────►│</span><br></span></code></pre></div></div>
<p><strong>Steps:</strong></p>
<ol>
<li class="">BLE Scanner calls <code>startScan()</code> but times out with no beacon signal detected.</li>
<li class=""><code>Context Interpreter</code> raises a <code>BeaconNotFoundError</code>.</li>
<li class="">The app loads the last successfully fetched vocabulary from AsyncStorage.</li>
<li class="">The AAC grid is rendered with the fallback vocabulary; a non-intrusive &quot;Offline Mode&quot; banner is shown.</li>
<li class="">An alert is dispatched to the linked administrator via Supabase Edge Function.</li>
<li class="">The child user continues communication without interruption.</li>
</ol>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="6-database-design">6. Database Design<a href="#6-database-design" class="hash-link" aria-label="Direct link to 6. Database Design" title="Direct link to 6. Database Design" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="61-entity-relationship-overview">6.1 Entity-Relationship Overview<a href="#61-entity-relationship-overview" class="hash-link" aria-label="Direct link to 6.1 Entity-Relationship Overview" title="Direct link to 6.1 Entity-Relationship Overview" translate="no">​</a></h3>
<p>The database comprises six core entities:</p>
<ul>
<li class=""><code>organizations</code> <strong>(1)</strong> — administers — <strong>(N)</strong> <code>administrators</code></li>
<li class=""><code>administrators</code> <strong>(1)</strong> — manages — <strong>(N)</strong> <code>user_accounts</code></li>
<li class=""><code>administrators</code> <strong>(1)</strong> — registers — <strong>(N)</strong> <code>beacons</code></li>
<li class=""><code>beacons</code> <strong>(N)</strong> — associated with — <strong>(1)</strong> <code>locations</code></li>
<li class=""><code>locations</code> <strong>(M)</strong> — linked to — <strong>(N)</strong> <code>vocabulary_words</code> via <code>location_words</code></li>
<li class=""><code>user_accounts</code> <strong>(1)</strong> — generates — <strong>(N)</strong> <code>usage_logs</code></li>
<li class=""><code>usage_logs</code> — references — <code>vocabulary_words</code> and <code>locations</code></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="62-table-design">6.2 Table Design<a href="#62-table-design" class="hash-link" aria-label="Direct link to 6.2 Table Design" title="Direct link to 6.2 Table Design" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="organizations">organizations<a href="#organizations" class="hash-link" aria-label="Direct link to organizations" title="Direct link to organizations" translate="no">​</a></h4>
<table><thead><tr><th>Column</th><th>Type</th><th>Constraints</th><th>Description</th></tr></thead><tbody><tr><td><code>org_id</code></td><td>uuid</td><td>PK, default <code>gen_random_uuid()</code></td><td>Unique organization identifier</td></tr><tr><td><code>name</code></td><td>text</td><td>NOT NULL, UNIQUE</td><td>Organization or facility name</td></tr><tr><td><code>created_at</code></td><td>timestamptz</td><td>DEFAULT <code>now()</code></td><td>Record creation timestamp</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="administrators">administrators<a href="#administrators" class="hash-link" aria-label="Direct link to administrators" title="Direct link to administrators" translate="no">​</a></h4>
<table><thead><tr><th>Column</th><th>Type</th><th>Constraints</th><th>Description</th></tr></thead><tbody><tr><td><code>admin_id</code></td><td>uuid</td><td>PK, FK → <code>auth.users.id</code></td><td>Linked to Supabase Auth user</td></tr><tr><td><code>org_id</code></td><td>uuid</td><td>FK → <code>organizations.org_id</code></td><td>Owning organization</td></tr><tr><td><code>email</code></td><td>text</td><td>NOT NULL, UNIQUE</td><td>Login and security email</td></tr><tr><td><code>is_main</code></td><td>boolean</td><td>DEFAULT false</td><td>True for Main Administrator</td></tr><tr><td><code>is_verified</code></td><td>boolean</td><td>DEFAULT false</td><td>Verified by Main Administrator</td></tr><tr><td><code>created_at</code></td><td>timestamptz</td><td>DEFAULT <code>now()</code></td><td>Account creation timestamp</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="user_accounts">user_accounts<a href="#user_accounts" class="hash-link" aria-label="Direct link to user_accounts" title="Direct link to user_accounts" translate="no">​</a></h4>
<table><thead><tr><th>Column</th><th>Type</th><th>Constraints</th><th>Description</th></tr></thead><tbody><tr><td><code>user_id</code></td><td>uuid</td><td>PK, default <code>gen_random_uuid()</code></td><td>Unique user identifier</td></tr><tr><td><code>admin_id</code></td><td>uuid</td><td>FK → <code>administrators.admin_id</code></td><td>Administering admin</td></tr><tr><td><code>display_name</code></td><td>text</td><td>NOT NULL</td><td>Name shown in the UI</td></tr><tr><td><code>accessibility_prefs</code></td><td>jsonb</td><td>DEFAULT <code>&#x27;{}&#x27;</code></td><td>Font size, contrast, layout prefs</td></tr><tr><td><code>created_at</code></td><td>timestamptz</td><td>DEFAULT <code>now()</code></td><td>Account creation timestamp</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="locations">locations<a href="#locations" class="hash-link" aria-label="Direct link to locations" title="Direct link to locations" translate="no">​</a></h4>
<table><thead><tr><th>Column</th><th>Type</th><th>Constraints</th><th>Description</th></tr></thead><tbody><tr><td><code>location_id</code></td><td>uuid</td><td>PK</td><td>Unique location identifier</td></tr><tr><td><code>admin_id</code></td><td>uuid</td><td>FK → <code>administrators</code></td><td>Admin who created this location</td></tr><tr><td><code>name</code></td><td>text</td><td>NOT NULL</td><td>Human-readable room name</td></tr><tr><td><code>description</code></td><td>text</td><td>nullable</td><td>Optional notes about the space</td></tr><tr><td><code>created_at</code></td><td>timestamptz</td><td>DEFAULT <code>now()</code></td><td>Record creation timestamp</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="beacons">beacons<a href="#beacons" class="hash-link" aria-label="Direct link to beacons" title="Direct link to beacons" translate="no">​</a></h4>
<table><thead><tr><th>Column</th><th>Type</th><th>Constraints</th><th>Description</th></tr></thead><tbody><tr><td><code>beacon_id</code></td><td>uuid</td><td>PK</td><td>Unique beacon record identifier</td></tr><tr><td><code>ble_uuid</code></td><td>text</td><td>NOT NULL, UNIQUE</td><td>Broadcast UUID from hardware</td></tr><tr><td><code>location_id</code></td><td>uuid</td><td>FK → <code>locations</code></td><td>Room this beacon represents</td></tr><tr><td><code>title</code></td><td>text</td><td>NOT NULL</td><td>Display name set by admin</td></tr><tr><td><code>registered_by</code></td><td>uuid</td><td>FK → <code>administrators</code></td><td>Admin who paired the beacon</td></tr><tr><td><code>created_at</code></td><td>timestamptz</td><td>DEFAULT <code>now()</code></td><td>Pairing timestamp</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="vocabulary_words">vocabulary_words<a href="#vocabulary_words" class="hash-link" aria-label="Direct link to vocabulary_words" title="Direct link to vocabulary_words" translate="no">​</a></h4>
<table><thead><tr><th>Column</th><th>Type</th><th>Constraints</th><th>Description</th></tr></thead><tbody><tr><td><code>word_id</code></td><td>uuid</td><td>PK</td><td>Unique word identifier</td></tr><tr><td><code>text</code></td><td>text</td><td>NOT NULL</td><td>The word or phrase string</td></tr><tr><td><code>icon_url</code></td><td>text</td><td>nullable</td><td>Path in Supabase Storage bucket</td></tr><tr><td><code>category</code></td><td>text</td><td>nullable</td><td>Grouping label (e.g. <code>&#x27;actions&#x27;</code>)</td></tr><tr><td><code>created_by</code></td><td>uuid</td><td>FK → <code>administrators</code></td><td>Admin who added the word</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="location_words-junction">location_words <em>(junction)</em><a href="#location_words-junction" class="hash-link" aria-label="Direct link to location_words-junction" title="Direct link to location_words-junction" translate="no">​</a></h4>
<table><thead><tr><th>Column</th><th>Type</th><th>Constraints</th><th>Description</th></tr></thead><tbody><tr><td><code>location_id</code></td><td>uuid</td><td>FK → <code>locations</code></td><td>Linked location</td></tr><tr><td><code>word_id</code></td><td>uuid</td><td>FK → <code>vocabulary_words</code></td><td>Linked word</td></tr><tr><td><code>weight</code></td><td>float4</td><td>DEFAULT <code>1.0</code></td><td>Admin-assigned relevance weight</td></tr><tr><td>PRIMARY KEY</td><td>—</td><td><code>(location_id, word_id)</code></td><td>Composite primary key</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="usage_logs">usage_logs<a href="#usage_logs" class="hash-link" aria-label="Direct link to usage_logs" title="Direct link to usage_logs" translate="no">​</a></h4>
<table><thead><tr><th>Column</th><th>Type</th><th>Constraints</th><th>Description</th></tr></thead><tbody><tr><td><code>log_id</code></td><td>uuid</td><td>PK, default <code>gen_random_uuid()</code></td><td>Unique log entry</td></tr><tr><td><code>user_id</code></td><td>uuid</td><td>FK → <code>user_accounts</code></td><td>User who selected the word</td></tr><tr><td><code>word_id</code></td><td>uuid</td><td>FK → <code>vocabulary_words</code></td><td>Word that was selected</td></tr><tr><td><code>location_id</code></td><td>uuid</td><td>FK → <code>locations</code>, nullable</td><td>Location when word was selected</td></tr><tr><td><code>selected_at</code></td><td>timestamptz</td><td>DEFAULT <code>now()</code></td><td>Timestamp of selection event</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="7-algorithms">7. Algorithms<a href="#7-algorithms" class="hash-link" aria-label="Direct link to 7. Algorithms" title="Direct link to 7. Algorithms" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="71-location-resolution-algorithm">7.1 Location Resolution Algorithm<a href="#71-location-resolution-algorithm" class="hash-link" aria-label="Direct link to 7.1 Location Resolution Algorithm" title="Direct link to 7.1 Location Resolution Algorithm" translate="no">​</a></h3>
<p>The system determines which location the user is currently in given a set of active BLE beacon signals via <code>react-native-ble-plx</code>. The algorithm operates as follows:</p>
<ol>
<li class=""><strong>Collect RSSI Samples</strong> – The BLE scanner collects <code>(uuid, rssi)</code> pairs over a 500 ms window to smooth signal noise.</li>
<li class=""><strong>Average RSSI</strong> – For each unique <code>uuid</code>, compute the mean RSSI over the sampling window.</li>
<li class=""><strong>Select Primary Beacon</strong> – Choose the <code>uuid</code> with the highest mean RSSI. This maps directly to a <code>location_id</code> via the <code>beacons</code> table.</li>
<li class=""><strong>Apply Proximity Weighting</strong> – Beacons within 10 dBm of the primary beacon are considered &quot;nearby.&quot; Vocabulary sets for nearby locations are blended into suggestions at a lower weight (configurable, default <code>0.3</code>) relative to the primary location (weight <code>1.0</code>).</li>
<li class=""><strong>Hysteresis Guard</strong> – To prevent rapid location switching as a user moves between areas, the resolved location only changes if the new primary beacon has been dominant for at least two consecutive sampling windows.</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">resolveLocation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">beaconReadings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> averaged </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">groupBy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">beaconReadings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;uuid&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">avgRssi</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> primary  </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">maxBy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">averaged</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;rssi&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> nearby   </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> averaged</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">filter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">b</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">rssi</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;=</span><span class="token plain"> primary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">rssi</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">primary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">uuid</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">===</span><span class="token plain"> lastPrimary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    stableCount</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    stableCount </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    lastPrimary </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> primary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">uuid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">stableCount </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    currentLocation  </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">lookupLocation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">primary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">uuid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    nearbyLocations  </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> nearby</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">b</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">lookupLocation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">uuid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> currentLocation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> nearbyLocations </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="72-word-suggestion-ranking-algorithm">7.2 Word Suggestion Ranking Algorithm<a href="#72-word-suggestion-ranking-algorithm" class="hash-link" aria-label="Direct link to 7.2 Word Suggestion Ranking Algorithm" title="Direct link to 7.2 Word Suggestion Ranking Algorithm" translate="no">​</a></h3>
<p>Given a resolved location (and optionally a set of nearby locations), the system ranks the vocabulary for display in the AAC grid. The ranking score for each word is:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Score(word, user, location) = locationWeight × adminWeight × log(1 + usageCount)</span><br></span></code></pre></div></div>
<p>Where:</p>
<ul>
<li class=""><strong>locationWeight</strong> – <code>1.0</code> for the primary location; <code>0.3</code> (configurable) for nearby locations.</li>
<li class=""><strong>adminWeight</strong> – the <code>weight</code> value stored in <code>location_words</code> for this <code>(location, word)</code> pair; defaults to <code>1.0</code>.</li>
<li class=""><strong>usageCount</strong> – the number of times this user has selected this word at this location, derived from <code>usage_logs</code>.</li>
</ul>
<p>Words are sorted descending by Score. The top N words (default grid size: 4 × 6 = 24) fill the <strong>Suggested</strong> landing page. Remaining words are accessible through category tabs following the standard AAC grid layout.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="73-offline-fallback-strategy">7.3 Offline Fallback Strategy<a href="#73-offline-fallback-strategy" class="hash-link" aria-label="Direct link to 7.3 Offline Fallback Strategy" title="Direct link to 7.3 Offline Fallback Strategy" translate="no">​</a></h3>
<p>When beacon detection fails or the device has no network connectivity, the system employs the following fallback cascade:</p>
<ol>
<li class="">Attempt to load the last successfully fetched vocabulary set from AsyncStorage.</li>
<li class="">If no cached set exists for the current user, load a generic &quot;core vocabulary&quot; board stored as a static JSON asset bundled with the app.</li>
<li class="">Display a non-intrusive status banner informing the user that offline mode is active.</li>
<li class="">Periodically retry beacon scanning and network requests in the background; when connectivity is restored, seamlessly update the displayed vocabulary without interrupting the user.</li>
</ol>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="8-non-functional-design-decisions">8. Non-Functional Design Decisions<a href="#8-non-functional-design-decisions" class="hash-link" aria-label="Direct link to 8. Non-Functional Design Decisions" title="Direct link to 8. Non-Functional Design Decisions" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="81-responsiveness">8.1 Responsiveness<a href="#81-responsiveness" class="hash-link" aria-label="Direct link to 8.1 Responsiveness" title="Direct link to 8.1 Responsiveness" translate="no">​</a></h3>
<p>The React Native app uses the <code>Dimensions</code> API and Flexbox to adapt the AAC icon grid to different device form factors (phones, tablets). The grid column count adjusts automatically — typically 3–4 columns on phones and 5–6 on tablets. Touch targets meet a minimum of <strong>48 × 48 dp</strong> in accordance with WCAG 2.1 AA and platform human interface guidelines.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="82-security">8.2 Security<a href="#82-security" class="hash-link" aria-label="Direct link to 8.2 Security" title="Direct link to 8.2 Security" translate="no">​</a></h3>
<p>Supabase Row Level Security (RLS) policies ensure that:</p>
<ul>
<li class="">Administrators can only read and write records belonging to their own organization.</li>
<li class="">Child user data is accessible only to administrators linked to that user.</li>
<li class="">Usage logs are write-only for client devices; read access is restricted to administrators.</li>
</ul>
<p>All client-server communication occurs over HTTPS. JWT tokens are short-lived (1 hour) and refreshed automatically by the Supabase JS client library. Tokens are stored in <code>expo-secure-store</code> (encrypted native keychain) rather than AsyncStorage.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="83-scalability">8.3 Scalability<a href="#83-scalability" class="hash-link" aria-label="Direct link to 8.3 Scalability" title="Direct link to 8.3 Scalability" translate="no">​</a></h3>
<p>Supabase is backed by a managed PostgreSQL instance that can be vertically or horizontally scaled. Read-heavy vocabulary fetches are offloaded by caching at the client level (AsyncStorage) and, optionally, by a Supabase Edge Function that caches location vocabulary aggregates for sub-10 ms response times under high concurrency.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="84-aac-device-interoperability">8.4 AAC Device Interoperability<a href="#84-aac-device-interoperability" class="hash-link" aria-label="Direct link to 8.4 AAC Device Interoperability" title="Direct link to 8.4 AAC Device Interoperability" translate="no">​</a></h3>
<p>The system exposes a JSON export endpoint that packages a user&#x27;s vocabulary sets in <strong>Open Board Format (OBF)</strong>, a community standard for AAC content exchange. Compatible third-party AAC devices that support OBF can import this data directly, satisfying the non-functional requirement to detect and port context to other AAC devices.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/Capstone-Projects-2026-spring/project-professional-group-one-llc/edit/main/documentation/docs/system-architecture/design.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><details><summary>Revision History</summary><table><thead><tr><th scope="row">Author</th><th scope="row">Revision</th><th scope="row">Date</th></tr></thead><tbody><tr><td colspan="3" style="text-align:center;font-style:italic;color:#666">Loading...</td></tr></tbody></table></details><span class="theme-last-updated">Last updated<!-- --> by <b>Walid Parsat</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/project-professional-group-one-llc/docs/category/system-architecture"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">System Architecture</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/project-professional-group-one-llc/docs/system-architecture/development-environment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Development Environment</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-introduction" class="table-of-contents__link toc-highlight">1. Introduction</a></li><li><a href="#2-system-overview" class="table-of-contents__link toc-highlight">2. System Overview</a><ul><li><a href="#21-architecture-style" class="table-of-contents__link toc-highlight">2.1 Architecture Style</a></li><li><a href="#22-technology-stack" class="table-of-contents__link toc-highlight">2.2 Technology Stack</a></li></ul></li><li><a href="#3-component-descriptions-and-interfaces" class="table-of-contents__link toc-highlight">3. Component Descriptions and Interfaces</a><ul><li><a href="#31-bluetooth-beacon-layer" class="table-of-contents__link toc-highlight">3.1 Bluetooth Beacon Layer</a></li><li><a href="#32-react-native-mobile-application" class="table-of-contents__link toc-highlight">3.2 React Native Mobile Application</a></li><li><a href="#33-supabase-backend" class="table-of-contents__link toc-highlight">3.3 Supabase Backend</a></li><li><a href="#34-admin-screen" class="table-of-contents__link toc-highlight">3.4 Admin Screen</a></li><li><a href="#35-external-services" class="table-of-contents__link toc-highlight">3.5 External Services</a></li></ul></li><li><a href="#4-class-diagrams" class="table-of-contents__link toc-highlight">4. Class Diagrams</a><ul><li><a href="#41-user--account-management" class="table-of-contents__link toc-highlight">4.1 User &amp; Account Management</a></li><li><a href="#42-beacon--location-domain" class="table-of-contents__link toc-highlight">4.2 Beacon &amp; Location Domain</a></li><li><a href="#43-vocabulary-domain" class="table-of-contents__link toc-highlight">4.3 Vocabulary Domain</a></li></ul></li><li><a href="#5-sequence-diagrams" class="table-of-contents__link toc-highlight">5. Sequence Diagrams</a><ul><li><a href="#use-case-1--account-creation" class="table-of-contents__link toc-highlight">Use Case 1 – Account Creation</a></li><li><a href="#use-case-2--signing-in" class="table-of-contents__link toc-highlight">Use Case 2 – Signing In</a></li><li><a href="#use-case-3--connecting-to-a-beacon" class="table-of-contents__link toc-highlight">Use Case 3 – Connecting to a Beacon</a></li><li><a href="#use-case-4--using-vocabulary-for-communication" class="table-of-contents__link toc-highlight">Use Case 4 – Using Vocabulary for Communication</a></li><li><a href="#use-case-5--updating-favorite-words-admin" class="table-of-contents__link toc-highlight">Use Case 5 – Updating Favorite Words (Admin)</a></li><li><a href="#use-case-6--beacon-connection-failure-handling" class="table-of-contents__link toc-highlight">Use Case 6 – Beacon Connection Failure Handling</a></li></ul></li><li><a href="#6-database-design" class="table-of-contents__link toc-highlight">6. Database Design</a><ul><li><a href="#61-entity-relationship-overview" class="table-of-contents__link toc-highlight">6.1 Entity-Relationship Overview</a></li><li><a href="#62-table-design" class="table-of-contents__link toc-highlight">6.2 Table Design</a></li></ul></li><li><a href="#7-algorithms" class="table-of-contents__link toc-highlight">7. Algorithms</a><ul><li><a href="#71-location-resolution-algorithm" class="table-of-contents__link toc-highlight">7.1 Location Resolution Algorithm</a></li><li><a href="#72-word-suggestion-ranking-algorithm" class="table-of-contents__link toc-highlight">7.2 Word Suggestion Ranking Algorithm</a></li><li><a href="#73-offline-fallback-strategy" class="table-of-contents__link toc-highlight">7.3 Offline Fallback Strategy</a></li></ul></li><li><a href="#8-non-functional-design-decisions" class="table-of-contents__link toc-highlight">8. Non-Functional Design Decisions</a><ul><li><a href="#81-responsiveness" class="table-of-contents__link toc-highlight">8.1 Responsiveness</a></li><li><a href="#82-security" class="table-of-contents__link toc-highlight">8.2 Security</a></li><li><a href="#83-scalability" class="table-of-contents__link toc-highlight">8.3 Scalability</a></li><li><a href="#84-aac-device-interoperability" class="table-of-contents__link toc-highlight">8.4 AAC Device Interoperability</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/project-professional-group-one-llc/docs/intro">Documentation</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Capstone-Projects-2026-spring/project-professional-group-one-llc" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/project-professional-group-one-llc/tutorial/open-source-usage">Template Contributors</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="https://upload.wikimedia.org/wikipedia/commons/1/17/Temple_T_logo.svg" alt="My Site Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="https://upload.wikimedia.org/wikipedia/commons/1/17/Temple_T_logo.svg" alt="My Site Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class="footer__copyright">Copyright © 2026 Project Professional Group One Llc, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>